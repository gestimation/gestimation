<?xml version="1.0" encoding="UTF-8"?>
<rss  xmlns:atom="http://www.w3.org/2005/Atom" 
      xmlns:media="http://search.yahoo.com/mrss/" 
      xmlns:content="http://purl.org/rss/1.0/modules/content/" 
      xmlns:dc="http://purl.org/dc/elements/1.1/" 
      version="2.0">
<channel>
<title>A Conversation on Causality at Our Table (JP)</title>
<link>https://gestimation.github.io/coffee-and-research/jp/</link>
<atom:link href="https://gestimation.github.io/coffee-and-research/jp/index.xml" rel="self" type="application/rss+xml"/>
<description></description>
<generator>quarto-1.7.32</generator>
<lastBuildDate>Sat, 13 Dec 2025 15:00:00 GMT</lastBuildDate>
<item>
  <title>Statistical Terms in Plain Language</title>
  <link>https://gestimation.github.io/coffee-and-research/jp/glossary.html</link>
  <description><![CDATA[ 




<div class="hero-header">
<p><img src="https://gestimation.github.io/coffee-and-research/image/father-daughter.png" class="hero-header-img img-fluid"></p>
</div>
<section id="glossary-statistical-terms-in-plain-language" class="level1">
<h1>Glossary − Statistical Terms in Plain Language</h1>
<div class="serif-block text-right">
<p>Keywords: causal model, language &amp; writing, probability model, survival &amp; competing risks</p>
</div>
<hr>
<section id="統計学のことば" class="level3">
<h3 class="anchored" data-anchor-id="統計学のことば">統計学のことば</h3>
<div class="dialogue">
<div class="voice-daughter">
<p>私「お父さん、いま診療科で輪読してる論文があるんだけど、言葉のニュアンスがつかめなくて。お父さんの話って、統計用語がいろいろ出てくるでしょ。正直いって実感がわかないのもあったんだ。よければ統計用語を日常用語で言い換えてみてくれないかな」</p>
</div>
<div class="voice-father">
<p>お父さん「今日は時間があるからいいよ、いくつかやってみようか。五十音順に並べるね」</p>
</div>
</div>
<p><strong>Aalen-Johansen法　Aalen-Johansen method</strong></p>
<p>競合リスク解析において、累積発生曲線を推定する方法</p>
<p><strong>αエラー　alpha error</strong></p>
<p>治療が本当は効かないのに有効と考えたり、関連がないのにあると判断してしまったりする類の誤り。偽陽性といってもよい。p値などを用いて5%以下に抑えることが、医学研究の慣習になっている</p>
<p><strong>一般化線型モデル　generalized linear model</strong></p>
<p>「回帰モデル」の一種で、回帰分析、分散分析、ロジスティック回帰などの統計手法の総称。統計ソフトウェアでは”GLM”という略称がよく用いられる</p>
<p><strong>打ち切り　censoring</strong></p>
<p>生存時間データを測定するとき、ある特定の時点で観察が妨げられ、その時点以降に関心のあるイベントが発生したであろうことしかわからなくなること</p>
<p><strong>回帰モデル　regression model</strong></p>
<p>ある変数が他の変数とどのような関連にあるのかを調べるための統計手法。回帰分析と同義だが、「分析」は統計手法を指すニュアンスがあるのに対して、「モデル」というとなんらかの数式や確率分布を意味することが多い。</p>
<p><strong>確率モデル　probability model</strong></p>
<p>抽象的なデータの見方を「モデル」とこの作品では呼んでいる。確率モデルは、データがどのような確率分布から発生するかを仮定したモデルのこと。</p>
<p><strong>片側p値　one-sided p-value</strong></p>
<p>相関には、正の相関と負の相関があるが、そのうちのどちらかにしか関心がないとき用いられるp値のこと。片側ではなく両側p値を用いることが一般的</p>
<p><strong>Kaplan-Meier法　Kaplan-Meier method</strong></p>
<p>生存時間解析において、生存曲線を推定する方法</p>
<p><strong>競合リスク　competing risk</strong></p>
<p>がんの原病死を追跡するときの事故死のように、それが起こると関心のあるイベントが観察されなくなる、競合するイベントのこと</p>
<p><strong>寄与割合　attributable fraction</strong></p>
<p>リスクや発生率の数値を変換して、特定の集団におけるリスク因子への曝露が、どのくらい疾患発症に寄与するかを割合で表したもの。いくつも定義がある</p>
<p><strong>効果サイズ　effect size</strong></p>
<p>治療の効果の大きさや、治療を比較したときの差のこと。サンプルサイズ設計では、効果サイズの値を設定しなければならないが、そもそもそれを知りたいから研究をするのだから悩ましい。このジレンマを皮肉って、「サンプルサイズから逆算して出した集積可能な差のこと」といった人もいる</p>
<p><strong>交絡　confounding</strong></p>
<p>集団を比較するとき気をつけるべきバイアス</p>
<p><strong>Cox回帰　Cox regression</strong></p>
<p>1972年にCox教授が発明し、大流行した統計手法。回帰モデルの一種だが、一般化線型モデルではない。生存時間をアウトカムとして扱い、生存曲線の差をハザード比として要約したり、様々な因子が生存時間と関連があるかどうか検討するために利用される</p>
<p><strong>サンプルサイズ設計　sample size calculation</strong></p>
<p>対象者数などの研究の規模を決めること。たとえば、効果サイズ、αエラー、βエラー（または検出力）を設定することで、研究に必要な対象者数を計算できる</p>
<p><strong>情報バイアス　information bias</strong></p>
<p>情報を集めるとき気をつけるべきバイアス</p>
<p><strong>推定目標（エスティマンド）　estimand</strong></p>
<p>臨床試験で治療を始めた後に、有害事象が生じたり、治療を中止したりすると、その試験でどのような治療効果を調べたいのか曖昧になる。推定目標とは、その研究でなにを推定したいのかを意味する統計用語。臨床試験では、計画段階で推定目標を決めておくことが、ICH E9ガイドラインにより求められている</p>
<p><strong>生物統計家　biostatistician</strong></p>
<p>医学・生命科学における統計専門家のことだが、バイオインフォマティシャン、データサイエンティスト、疫学者とは、所属学会やコミュニティーが異なる。狭い意味では、臨床試験を専門とする統計プロフェッショナルのことを指し、そのための資格（試験統計家認定制度）もあるくらいだが、生物（bio）という接頭辞がついているためわかりにくい</p>
<p><strong>生存曲線　survival curve</strong></p>
<p>横軸に時間を、縦軸にその時点で生存している割合を図示したグラフのこと。がんや循環器疾患など多くの疾患領域で、研究結果が生存曲線として示されることが多い</p>
<p><strong>選択バイアス　selection bias</strong></p>
<p>研究の対象となる集団を選ぶとき気をつけるべきバイアス</p>
<p><strong>代替エンドポイント　surrogate endpoint</strong></p>
<p>治療が患者の予後に与える効果を調べるとき、臨床的に意味のある指標が得られないことがある。そのような状況で代わりに用いられるエンドポイントやアウトカムのこと。たとえばがん臨床試験では、奏効率が全生存期間の代替エンドポイントとして用いられてきたが、延命効果があるかどうかを必ずしも反映しないという批判も多い</p>
<p><strong>DAG（有効非循環グラフ）　directed acyclic graph</strong></p>
<p>抽象的なデータの見方を「モデル」とこの作品では呼んでいる。DAGは、変数間の因果関係を矢印で表した構造的な因果モデルの一種。</p>
<p><strong>デザイン　design</strong></p>
<p>統計学では昔から実験計画のことを”design”と呼んできたが、それが転じて、研究立案やその際に決めるべき要素を意味するようになった。ランダム化臨床試験、調査、コホート研究などは、デザインの一種</p>
<p><strong>バイアス　bias</strong></p>
<p>一般的には偏った見方や行動を指す言葉だが、統計学では、推定値が真値（推定目標）からずれる傾向やその程度の意味で用いられる。データを集めた後にバイアスがあることがわかったとしても、対処は難しい</p>
<p><strong>ハザード比　hazard ratio</strong></p>
<p>Cox回帰から計算される指標で、生存曲線を比較するために用いられる</p>
<p><strong>比　ratio</strong></p>
<p>ある量を別の量で割ることで求められる指標。割合と率は比の一種</p>
<p><strong>比例ハザード性　proportional hazards assumption</strong></p>
<p>死亡や増悪のようなイベントが生じるスピードが、群の間で定数倍になっていて、その関係が時間を通じて変わらないという仮定のこと</p>
<p><strong>p値　p-value</strong></p>
<p>研究結果をみるとき、真っ先に見てしまいがちな数字。統計学的有意（statistical significance）、つまり誤差を越えた関連があるか見分けるときに用いられる</p>
<p><strong>Fine-Grayモデル　Fine-Gray model</strong></p>
<p>1999年にFine教授が発明した、Cox回帰を拡張した統計手法。競合リスクを含む生存時間データがアウトカムのときの回帰モデルの一種</p>
<p><strong>βエラー　beta error</strong></p>
<p>サンプルサイズ設計の鍵になる数字。せっかく臨床試験を行ったのに、真に効く治療を有効性がないと判断してしまう確率のこと。データをたくさん集めることができ、βエラーが低いことを、「検出力が高い」という</p>
<p><strong>ランダム化　randomization</strong></p>
<p>新規治療と標準治療のように、介入の効果を比べたいとき、どの介入を受けるかをランダム（無作為）に決める操作のこと。バイアスが生じないようにする工夫のひとつ</p>
<p><strong>率　rate</strong></p>
<p>一定時間に事象が生じるスピードを表す指標。疫学では、人年法（発生数/観察人年）で計算される。人数を人数×年で割っているため、単位は1/年（より一般には1/時間）</p>
<p><strong>リスク　risk</strong></p>
<p>疾患が生じる確率のこと。ただし、どの集団を対象に推定したかによって疾患リスクは当然異なるから、リスクの数字だけを使うのはやめたほうがよい</p>
<p><strong>両側p値　two-sided p-value</strong></p>
<p>相関には、正の相関と負の相関があるが、両方に関心があるとき用いられるp値のこと。片側ではなく両側p値を用いることが一般的</p>
<p><strong>Rubin因果モデル　Rubin causal model</strong></p>
<p>抽象的なデータの見方を「モデル」とこの作品では呼んでいる。Rubin因果モデルは、同じ解析単位において原因が別の値をとっていたとき、アウトカムがどうなっていたか（潜在結果変数）を用いて、因果効果を定義したモデルのこと。割付アルゴリズムや確率分布を含めた枠組みを指すこともあるが、因果効果の定義に関わる部分に焦点を当てるため、それらは明示的には扱わない。</p>
<p><strong>ロジスティック回帰　logistic regression</strong></p>
<p>ある事象が生じる確率と、他の変数との関連を調べるための統計手法。2値データがアウトカムのときの回帰モデルの一種。回帰係数の指数（exponential）をとることでオッズ比を計算できる</p>
<p><strong>割合　proportion</strong></p>
<p>全体に対してそれが占める分量を表す指標。2値データや分類データを要約するために用いられる。人数を人数で割っているため、単位がキャンセルして単位を持たない（無単位）</p>
<div class="dialogue">
<div class="voice-daughter">
<p>私「こうして一覧で見ると、論文ででてきた呪詛もちょっとは人間の言葉に見えてきたかも」</p>
</div>
<div class="voice-father">
<p>お父さん「そうそう。用語がわかると、あとは臨床やデータ自体の話に集中できるからね」</p>
</div>
</div>
<div class="callout callout-style-simple callout-note callout-titled" title="統計用語の違い">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
統計用語の違い
</div>
</div>
<div class="callout-body-container callout-body">
<p>生存曲線は英語ではsurvival curveですが、同じまたは似た意味で用いられる用語は、survival function、survival rate、overall survival curve、Kaplan-Meier curveなど無数にあります。実はそれぞれ細かい意味が違うのです。</p>
<ul>
<li><p>生存曲線（survival curve）とほぼ同義</p>
<p>Survival function</p></li>
<li><p>ほぼ同義だが、曲線というよりある時点の値を意図した用語</p>
<p>Survival rate, survival probability, survival proportion</p></li>
<li><p>生存曲線をどの統計手法で推定したのかを特定する用語</p>
<p>Kaplan-Meier curve, Kaplan-Meier estimator, Kaplan-Meier estimate, Kaplan-Meier method</p></li>
<li><p>エンドポイントの種類を特定する用語</p>
<p>Overall survival curve, disease-free survival curve, 5-year OS, 3-year DFS</p></li>
</ul>
<p>統計学では、推定方法を推定量（estimator）、推定した結果を推定値（estimate）、推定しようとしている対象を推定目標（estimand）といいます。ここは論文を書くとき注意が必要なところで、MethodsではKaplan-Meier estimatorと書くのが自然ですし、ResultsではKaplan-Meier estimateを用いることが多いでしょう。「人名+estimator」の代わりに「人名+method」という表記もできて、Kaplan-Meier methodの方がより広い意味で用いることができます。</p>
<p>最後に注意してほしいのが、累積発生曲線（cumulative incidence curve）や累積発生関数（cumulative incidence function）です。論文の図の縦軸のラベルに用いられることが多い表現ですが、生存曲線と本質的に違いはないと思いがちですよね。しかしこれらは、競合リスクがあるときにだけ用いられる、統計家が意識して区別している用語です。専門的には、統計家の名前を用いてAalen-Johansen曲線とも呼びます。生存曲線の上下を反転したグラフを”cumulative”と呼ぶことがありますが、これは統計用語ではなく慣習的な表現です。累積発生曲線と区別しないと誤解が生じます。</p>
</div>
</div>
<div class="callout callout-style-simple callout-note callout-titled" title="このエピソードに関係するクイズです">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
このエピソードに関係するクイズです
</div>
</div>
<div class="callout-body-container callout-body">
<p>以下の4つの単語は、正式な統計用語ではありませんが、しばしば臨床試験の文献で目にするものです。このうち、誤りとはいえないものはどれでしょう。</p>
<ol type="1">
<li>サンプル数</li>
<li>COX回帰</li>
<li>OS曲線</li>
<li><em>T</em>検定</li>
</ol>
</div>
</div>
<div class="callout callout-style-simple callout-note callout-titled" title="答えはこちら">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-3-contents" aria-controls="callout-3" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
答えはこちら
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-3" class="callout-3-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<ul>
<li><strong>正解は3です。</strong></li>
</ul>
<p>サンプルサイズのことをサンプル数と表記している文献がありますが、サンプル数は臨床試験でいえば群の数に相当するので、用法として誤りです。Coxは人名なので、1文字目以外は大文字ではありません。OS曲線は、overall-survival curveの意味ととれなくはないので、誤りとはいえないでしょう。<em>t</em>検定のことを<em>T</em>検定と表記するケースも目にします。<em>T</em>検定は、<em>t</em>検定とは別の統計手法として存在するのですが、臨床試験では使われないため誤記でしょう。</p>
</div>
</div>
</div>


</section>
</section>

 ]]></description>
  <guid>https://gestimation.github.io/coffee-and-research/jp/glossary.html</guid>
  <pubDate>Sat, 13 Dec 2025 15:00:00 GMT</pubDate>
</item>
<item>
  <title>A First Step into Survival and Competing Risks Analysis with R</title>
  <link>https://gestimation.github.io/coffee-and-research/jp/study-design-4.html</link>
  <description><![CDATA[ 




<div class="hero-header">
<p><img src="https://gestimation.github.io/coffee-and-research/image/father-daughter.png" class="hero-header-img img-fluid"></p>
</div>
<section id="study-design-iv-a-first-step-into-survival-and-competing-risks-analysis-with-r" class="level1">
<h1>Study Design IV − A First Step into Survival and Competing Risks Analysis with R</h1>
<div class="serif-block text-right">
<p>Keywords: bias, R simulation, study design, survival &amp; competing risks</p>
</div>
<hr>
<section id="調査項目とデータの型" class="level3">
<h3 class="anchored" data-anchor-id="調査項目とデータの型">調査項目とデータの型</h3>
<div class="dialogue">
<div class="voice-daughter">
<p>私「あれ、懐かしい。私が小学生の頃に買ったルービックキューブじゃない、そんなのやってるの。時間があるならちょっといい？がんサバイバーの復職率を調査する話があったでしょ。患者さんに送る調査票をつくってみたんだけど、見てくれる？あ、この前のRも参考になったよ、調査結果が想像できた」</p>
</div>
<div class="voice-father">
<p>お父さん「どれどれ」</p>
</div>
<p><img src="https://gestimation.github.io/coffee-and-research/jp/study-design-4-1.png" class="img-fluid"></p>
<div class="voice-father">
<p>お父さん「復職率の定義はなに？」</p>
</div>
<div class="voice-daughter">
<p>私「どういうこと？」</p>
</div>
<div class="voice-father">
<p>お父さん「調査票を見ただけじゃ、この質問項目で十分かどうかわからないってこと。手術日から調査日の間に、復職を希望した患者さんが、希望どおり復職できたかどうかを調べたいのかな？」</p>
</div>
<div class="voice-daughter">
<p>私「それもいいんだけど、復職を希望してないって回答した患者さんのなかに、会社の方針などの理由で復職をあきらめた患者さんも含まれるかもしれない。だから、復職率を計算するとき、分母は、復職を希望した患者さんじゃなくて、手術を受けた患者さん全員にしたいわ。そうした方が、就労実態がわかりやすそうだもの」</p>
</div>
<div class="voice-father">
<p>お父さん「手術日から調査日の間の復職を調べたいかどうかについては？」</p>
</div>
<div class="voice-daughter">
<p>私「えーっと。調査票に回答してもらうタイミングは患者さんによってまちまちになりそうだから、調査日は使いたくない。1年以内に復職できるかを定義にするのはどうかな？あ！ 復職日を答えてもらえばいいのかも！」</p>
</div>
<div class="voice-father">
<p>お父さん「復職日はあった方がいいよね。そうすると、復職状況から解析用の“変数”をつくるには、分類データと生存時間データの2通りが考えられる。それはさておき、手術後に亡くなった場合はどうするの？」</p>
</div>
<div class="voice-daughter">
<p>私「入院中に亡くなった場合は、調査対象に含めない。でも、術後再発による死亡を分母から除外するのは変な気がする」</p>
</div>
<div class="voice-father">
<p>お父さん「そうだね。除外するとバイアスが生じると思う。ターゲットにしている集団からずれちゃうからね。がん患者を追跡するような研究をするとき、大切なことが3つある。1つ、どのタイミングを<strong>時間原点</strong>にするかを決める必要があるよね。この場合、時間原点は退院日にするといい。2つ、追跡期間の目標を設定して、その時点までは、可能な限り情報を収集すること。情報が取れないとバイアスが生じる原因になる。3つ、時間原点後に生じたイベントは除外してはならない」</p>
</div>
</div>
<ul>
<li>時間原点を定義する</li>
<li>追跡期間の目標を設定し、その時点までは可能な限り情報を収集する</li>
<li>時間原点後に生じたイベントは除外したり、層別に用いたりしない</li>
</ul>
<div class="dialogue">
<div class="voice-daughter">
<p>私「後からバイアスがあるとか言われたくないもんね。ふむふむ」</p>
</div>
<div class="voice-father">
<p>お父さん「以前、“PECO”という要素を使って臨床疑問を構造化したらってアドバイスしたよね。Pが根治切除後の直腸がん患者さんだったら、その集団をもれなく調査しないといけない」</p>
</div>
<div class="voice-daughter">
<p>私「分類データと生存時間データってなに？」</p>
</div>
<div class="voice-father">
<p>お父さん「これもこの前話したでしょ。統計解析を行ううえで基本になるのが“データの型”で、分類データと生存時間データはその種類だよ」</p>
</div>
<div class="voice-daughter">
<p>私「いや、先週の話だし、私忙しいし」</p>
</div>
<div class="voice-father">
<p>お父さん「調査票を少し手直ししたから、これを使ってもう一度話すよ」</p>
</div>
<p><img src="https://gestimation.github.io/coffee-and-research/jp/study-design-4-2.png" class="img-fluid"></p>
<div class="voice-father">
<p>お父さん「分類データは、この場合、患者のアウトカムを分類したものだよ。1年以内に復職したかどうかをアウトカムにしたらどうかなっていってたよね」</p>
</div>
<div class="voice-daughter">
<p>私「うん」</p>
</div>
<div class="voice-father">
<p>お父さん「たとえば、“1年以内に復職あり”を分類1、“1年以内に復職なし”を分類2にしたら、2値データと呼ばれる分類データの一種になる。これは調査票から調べられるし、復職率も計算できるよね」</p>
</div>
<div class="voice-daughter">
<p>私「うん。1年以内の死亡を復職なしって扱えばね」</p>
</div>
<div class="voice-father">
<p>お父さん「でも就労状況を集計するときは2値データではなく、3カテゴリの分類データの方がいい。“1年以内に復職あり”を分類1、“1年以内に復職なし（死亡以外の理由のため）”を分類2、“1年以内に復職なし（死亡のため）”を分類3にしたらどう？もっと詳細にアウトカムが把握できるでしょ」</p>
</div>
<div class="voice-daughter">
<p>私「うんうん。じゃあ生存時間データはなんだっけ？OSってこと？」</p>
</div>
<div class="voice-father">
<p>お父さん「たしかに全生存期間（OS）は生存時間データの一種だよ。名前から誤解されがちだけど、それ以外にもあるんだ。生存時間データがどういうものかっていうと、時間原点から“イベント”までにかかった時間を表す変数のこと」</p>
</div>
<div class="voice-daughter">
<p>私「復職状況も生存時間データになるの？」</p>
</div>
<div class="voice-father">
<p>お父さん「そうすることもできる。この場合は、“退院日から復職日までの期間”を考えればいい。たとえばね、4月1日に退院して、4月30日に復職したとしたら、この患者の生存時間データは30-1+1=30日になる。これだとただの日数だから、連続データとの違いがはっきりしないけど、生存時間データの本質は、<strong>打ち切り （censoring）</strong>があることなんだ。調査日までに復職しなかった場合、退院日から復職日までの期間は存在しないでしょ」</p>
</div>
<div class="voice-daughter">
<p>私「まあそうだけど、それでいいんじゃないの？」</p>
</div>
<div class="voice-father">
<p>お父さん「統計解析のソフトウェアを使うとき一工夫が必要で、調査日の時点で復職しなかった、つまり復職の追跡が打ち切られたという情報を、入力してあげなければならない。だから生存時間データは、2つの変数が組になっているんだ。</p>
</div>
</div>
<ul>
<li>時間変数</li>
<li>イベント変数</li>
</ul>
<div class="dialogue">
<div class="voice-father">
<p>お父さん「イベント変数は、いわゆる生存時間データの場合は、イベントが観察されたか、打ち切りになったかを表す2値データ。時間変数は、この場合は“退院日から復職日までの期間”か“退院日から調査日までの期間”のどちらかになる」</p>
</div>
<div class="callout callout-style-simple callout-note callout-titled" title="生存時間データの入力">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-1-contents" aria-controls="callout-1" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
生存時間データの入力
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-1" class="callout-1-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>生存時間データは2つの変数の組であるため、Rの関数に入力するときもペアで指定する必要があります。<strong>survival</strong>パッケージの<code>survfit()</code>や<code>coxph()</code>では、実は入力専用の関数<code>Surv()</code>を用意しています。入力の仕様はパッケージによってまちまちで、たとえば<strong>mets</strong>パッケージでは<code>Event()</code>を別に定義して用いています。<strong>cifmodeling</strong>パッケージの<code>cifplot()</code>は、<code>Surv()</code>と<code>Event()</code>の両方に対応しています。</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(survival)</span>
<span id="cb1-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(cifmodeling)</span>
<span id="cb1-3"></span>
<span id="cb1-4"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">survfit</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">Surv</span>(time, status) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> stoma,</span>
<span id="cb1-5">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data         =</span> dat</span>
<span id="cb1-6">)</span>
<span id="cb1-7"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cifplot</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">Surv</span>(time, status) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> stoma,</span>
<span id="cb1-8">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data         =</span> dat,</span>
<span id="cb1-9">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">outcome.type =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"survival"</span>,</span>
<span id="cb1-10">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">label.y      =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Overall survival"</span></span>
<span id="cb1-11">)</span>
<span id="cb1-12"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cifplot</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">Event</span>(time, status) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> stoma,</span>
<span id="cb1-13">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data         =</span> dat,</span>
<span id="cb1-14">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">outcome.type =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"survival"</span>,</span>
<span id="cb1-15">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">label.y      =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Overall survival"</span></span>
<span id="cb1-16">)</span></code></pre></div>
</div>
</div>
</div>
</div>
<div class="voice-daughter">
<p>私「えーっと、イベント変数は2値データってことは、すべての患者さんで復職か、打ち切りかの2択しかないってこと？死亡はどうなるの？」</p>
</div>
<div class="voice-father">
<p>お父さん「いま話したような扱いをするなら、死亡した患者さんは、打ち切りという分類に含まれることになる。ただし、<strong>競合リスク （competing risk）</strong>という別の扱い方もある。簡単にいうと、それが起こると研究で調べたいイベント（たとえば死亡や復職）が観察されなくなる、競合するイベントのことだよ」</p>
</div>
<div class="voice-daughter">
<p>私「ああ、死亡が競合リスクってことね」</p>
</div>
<div class="voice-father">
<p>お父さん「生存時間データは、英語ではsurvival data以外にtime-to-event dataっていったりもするんだけどね。時間とともに起きるイベントって、生存か死亡かだけじゃないでしょ。競合リスクを解析できるようにしたのが競合リスクモデルなんだ。この場合、さっきのイベント変数は、イベント、競合リスク、打ち切りという3カテゴリを表す変数になる。イベント変数はこんな感じでコーディングされる」</p>
</div>
<ul>
<li>イベント変数=0: イベントが観察される前に打ち切りになった</li>
<li>イベント変数=1: イベントが観察された</li>
<li>イベント変数=2: イベントが観察される前に競合リスクが生じた</li>
</ul>
<div class="voice-daughter">
<p>私「そうなんだ。イベント変数ってなんとなく0と1だと思ってたわ」</p>
</div>
<section id="生存時間解析と競合リスク解析" class="level3">
<h3 class="anchored" data-anchor-id="生存時間解析と競合リスク解析">生存時間解析と競合リスク解析</h3>
<div class="voice-father">
<p>お父さん「競合リスクとあわせて知ってほしいのが、Kaplan-Meier曲線が生存曲線じゃなくなるってこと」</p>
</div>
<div class="voice-daughter">
<p>私「どういう意味？」</p>
</div>
<div class="voice-father">
<p>お父さん「ほら、生存と死亡しかなかったら、死亡確率の裏返しが生存確率でしょ。でも死因の内訳、たとえば原病死と他因死があって、他因死が競合リスクだったらどう？原病死の確率の裏返しは生存確率にならない。だから、競合リスク解析では、Kaplan-Meier曲線じゃなくてAalen-Johansen曲線を使う。ちょっとRの結果をみてほしい」</p>
</div>
</section>
</div>
<div class="callout callout-style-simple callout-note callout-titled" title="シミュレーションデータ（再発あり）の生成">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
シミュレーションデータ（再発あり）の生成
</div>
</div>
<div class="callout-body-container callout-body">
<p>前回より少しだけがんの臨床研究を意識して、シミュレーションデータにおける、全生存期間（OS）・無再発生存期間（RFS）・累積再発率（CIR）の違いをみてみましょう。CIRの解析では、再発の前に死亡した患者が存在するため、その扱いを決める必要があります。これを<strong>競合リスク（competing risk）</strong>といいます。</p>
<p>以下のコードでは、死亡だけではなく再発を伴った生存時間アウトカム3種類をRで生成する「関数」<code>generate_data()</code>を定義しています。OSのイベントは「死亡」、RFSのイベントは「死亡と再発」です。CIRのイベントは「再発」ですが、死亡を競合リスクとして扱います。なお、<code>generate_data()</code>やこのシミュレーションデータは、今後の解説でも再利用する予定です。</p>
<ul>
<li><p>ストーマ保有：2項分布（<code>rbinom</code>）から生成した2値データ</p></li>
<li><p>生存時間：指数分布（<code>rexp</code>）から生成した生存時間データ（t_relapse, t_death, t_censoringの乱数から計算）</p></li>
</ul>
<p>前回、競合リスクのない生存時間データを要約しましたが、そこで用いたのは<strong>Kaplan-Meier曲線</strong>でしたよね。それに対して、競合リスク解析では、Kaplan-Meier曲線ではなく、<strong>Aalen-Johansen曲線</strong>を用いるのが正式です。</p>
</div>
</div>
<div class="callout callout-style-simple callout-note callout-titled" title="generate_data()のコードはこちら（データ生成に使用）">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-3-contents" aria-controls="callout-3" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
generate_data()のコードはこちら（データ生成に使用）
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-3" class="callout-3-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1">generate_data <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">function</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">n=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">200</span>, hr1, hr2) {</span>
<span id="cb2-2">  stoma <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rbinom</span>(n, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">prob =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.4</span>)</span>
<span id="cb2-3">  sex <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rbinom</span>(n, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">prob =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.5</span>)</span>
<span id="cb2-4">  age <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rnorm</span>(n, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">mean =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">65</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> stoma, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sd =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">8</span>)</span>
<span id="cb2-5">  hazard_relapse   <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ifelse</span>(stoma <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, hr1<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.10</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.10</span>) <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># 再発のハザード（大きいほど早く起こる）</span></span>
<span id="cb2-6">  hazard_death     <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ifelse</span>(stoma <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, hr2<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.10</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.10</span>) <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># 死亡のハザード（大きいほど早く起こる）</span></span>
<span id="cb2-7">  hazard_censoring <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.05</span>                               <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># 打ち切りハザード（群に依存しない）</span></span>
<span id="cb2-8">  </span>
<span id="cb2-9">  t_relapse   <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rexp</span>(n, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">rate =</span> hazard_relapse)   <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># 再発までの潜在時間</span></span>
<span id="cb2-10">  t_death     <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rexp</span>(n, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">rate =</span> hazard_death)     <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># 死亡までの潜在時間</span></span>
<span id="cb2-11">  t_censoring <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rexp</span>(n, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">rate =</span> hazard_censoring) <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># 打ち切りまでの潜在時間</span></span>
<span id="cb2-12">  </span>
<span id="cb2-13">  <span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## --- 全生存期間（OS） ----------------------------------------</span></span>
<span id="cb2-14">  time_os   <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">pmin</span>(t_death, t_censoring)</span>
<span id="cb2-15">  status_os <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.integer</span>(t_death <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;=</span> t_censoring)  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># 1 = 死亡, 0 = 打ち切り</span></span>
<span id="cb2-16">  </span>
<span id="cb2-17">  <span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## --- 無再発生存期間（RFS） -----------------------------------</span></span>
<span id="cb2-18">  time_rfs <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">pmin</span>(t_relapse, t_death, t_censoring)</span>
<span id="cb2-19">  </span>
<span id="cb2-20">  status_rfs <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">integer</span>(n)</span>
<span id="cb2-21">  status_rfs[time_rfs <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> t_relapse <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&amp;</span> time_rfs <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;</span> t_censoring] <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span> <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># 再発</span></span>
<span id="cb2-22">  status_rfs[time_rfs <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> t_death <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&amp;</span> time_rfs <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;</span> t_censoring] <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>   <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># 死亡</span></span>
<span id="cb2-23">  </span>
<span id="cb2-24">  <span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## --- 累積再発率（CIR） + 競合リスク --------------------------</span></span>
<span id="cb2-25">  time_cir <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">pmin</span>(t_relapse, t_death, t_censoring)</span>
<span id="cb2-26">  </span>
<span id="cb2-27">  status_cir <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">integer</span>(n)</span>
<span id="cb2-28">  status_cir[time_cir <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> t_relapse <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&amp;</span> time_cir <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;</span> t_censoring] <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span> <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># イベント1: 再発</span></span>
<span id="cb2-29">  status_cir[time_cir <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> t_death <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&amp;</span> time_cir <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;</span> t_censoring] <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>   <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># イベント2: 競合リスクとしての死亡</span></span>
<span id="cb2-30">  </span>
<span id="cb2-31">  <span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## --- データフレームにまとめる --------------------------------</span></span>
<span id="cb2-32">  dat <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">data.frame</span>(</span>
<span id="cb2-33">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">id         =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>n,</span>
<span id="cb2-34">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sex        =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">factor</span>(sex, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">levels =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">labels =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"WOMAN"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"MAN"</span>)),</span>
<span id="cb2-35">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">age        =</span> age,</span>
<span id="cb2-36">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">stoma      =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">factor</span>(stoma, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">levels =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>),</span>
<span id="cb2-37">                        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">labels =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"WITHOUT STOMA"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"WITH STOMA"</span>)),</span>
<span id="cb2-38">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">time_os    =</span> time_os,</span>
<span id="cb2-39">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">status_os  =</span> status_os,</span>
<span id="cb2-40">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">time_rfs   =</span> time_rfs,</span>
<span id="cb2-41">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">status_rfs =</span> status_rfs,</span>
<span id="cb2-42">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">time_cir   =</span> time_cir,</span>
<span id="cb2-43">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">status_cir =</span> status_cir</span>
<span id="cb2-44">  )</span>
<span id="cb2-45">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">return</span>(dat)</span>
<span id="cb2-46">}</span></code></pre></div>
</div>
</div>
</div>
</div>
<div class="callout callout-style-simple callout-note callout-titled" title="全生存期間（OS）のKaplan-Meier曲線">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
全生存期間（OS）のKaplan-Meier曲線
</div>
</div>
<div class="callout-body-container callout-body">
<p>OSとRFSは通常の生存時間データですから、前回と同様に<strong>cifmodeling</strong>パッケージの<code>cifplot()</code>を使って、Kaplan-Meier曲線で記述します。まずはOS。</p>
</div>
</div>
<div class="callout callout-style-simple callout-note callout-titled" title="Rコードと結果はこちら">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-5-contents" aria-controls="callout-5" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Rコードと結果はこちら
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-5" class="callout-5-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># devtools::install_github("gestimation/cifmodeling") #インストールが必要なら実行 </span></span>
<span id="cb3-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(cifmodeling)</span>
<span id="cb3-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">set.seed</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">46</span>)</span>
<span id="cb3-4">dat <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">generate_data</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">hr1=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">hr2=</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1.5</span>) <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#再発ハザード比2, 死亡ハザード比1.5のデータ生成</span></span>
<span id="cb3-5"></span>
<span id="cb3-6"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cifplot</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">Event</span>(time_os, status_os) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> stoma,</span>
<span id="cb3-7">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data         =</span> dat,</span>
<span id="cb3-8">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">outcome.type =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"survival"</span>,</span>
<span id="cb3-9">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">label.y      =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Overall survival"</span></span>
<span id="cb3-10">)</span></code></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://gestimation.github.io/coffee-and-research/jp/study-design-4_files/figure-html/unnamed-chunk-2-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="callout callout-style-simple callout-note callout-titled" title="無再発生存期間（RFS）のKaplan-Meier曲線">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
無再発生存期間（RFS）のKaplan-Meier曲線
</div>
</div>
<div class="callout-body-container callout-body">
<p>次にRFSです。<code>Event()</code>で指定する変数以外は変わりません。</p>
</div>
</div>
<div class="callout callout-style-simple callout-note callout-titled" title="Rコードと結果はこちら">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-7-contents" aria-controls="callout-7" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Rコードと結果はこちら
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-7" class="callout-7-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cifplot</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">Event</span>(time_rfs, status_rfs) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> stoma,</span>
<span id="cb4-2">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data         =</span> dat,</span>
<span id="cb4-3">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">outcome.type =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"survival"</span>,</span>
<span id="cb4-4">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">label.y      =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Relapse-free survival"</span></span>
<span id="cb4-5">)</span></code></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://gestimation.github.io/coffee-and-research/jp/study-design-4_files/figure-html/unnamed-chunk-3-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="callout callout-style-simple callout-note callout-titled" title="累積再発率（CIR）のAalen-Johansen曲線">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
累積再発率（CIR）のAalen-Johansen曲線
</div>
</div>
<div class="callout-body-container callout-body">
<p>以下のコードでは、<code>Event(time_cir, status_cir)</code>のコーディングによって競合リスクを入力しています。</p>
<ul>
<li><code>status_cir=1</code> : 関心のあるイベント（再発）</li>
<li><code>status_cir=2</code> : 競合リスク（再発を経験しない死亡）</li>
<li><code>status_cir=0</code> : 打ち切り</li>
</ul>
<p>さらに<code>outcome.type = "competing-risk"</code>を指定することで、Aalen-Johansen曲線を描いています。</p>
</div>
</div>
<div class="callout callout-style-simple callout-note callout-titled" title="Rコードと結果はこちら">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-9-contents" aria-controls="callout-9" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Rコードと結果はこちら
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-9" class="callout-9-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cifplot</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">Event</span>(time_cir, status_cir) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> stoma,</span>
<span id="cb5-2">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data         =</span> dat,</span>
<span id="cb5-3">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">outcome.type =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"competing-risk"</span>,</span>
<span id="cb5-4">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">label.y      =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Cumulative incidence of relapse"</span></span>
<span id="cb5-5">)</span></code></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://gestimation.github.io/coffee-and-research/jp/study-design-4_files/figure-html/unnamed-chunk-4-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="dialogue">
<div class="voice-daughter">
<p>私「CIRの解析に使ったのがAalen-Johansen曲線ね。でもこれって、Kaplan-Meier曲線のY軸を逆さにしただけじゃないの」</p>
</div>
<div class="voice-father">
<p>お父さん「グラフ上は見分けられないからそう思っても仕方ないよね。でもこのふたつは区別してほしい。</p>
<blockquote class="blockquote">
<p>生存曲線（Kaplan-Meier曲線）と累積発生曲線（Aalen-Johansen曲線）は別の統計手法なので 競合リスクがあるときはAalen-Johansen曲線を用いる。</p>
</blockquote>
<p>ちなみに、relapse-free timeじゃなくてcumulative incidence of relapseを使いたいっていったけど、それは<strong>累積発生曲線（cumulative incidence curve）</strong>が、専門的にはAalen-Johansen曲線と同じ意味だからなんだよね。やろうと思えばCIRを解析するとき、Kaplan-Meier曲線を計算することもできるよ。このとき、再発を経験しない死亡は、競合リスク（<code>status_cir=2</code>）ではなく打ち切り（<code>status_cir=0</code>）として入力することになる。でも本来なら、死亡は、追跡期間終了や追跡不能による打ち切りとは、違う転帰だよね。だから競合リスクとして扱うのが正しい。</p>
</div>
<div class="voice-daughter">
<p>私「じゃあ死亡と再発を両方イベントにしたRFSを解析するのは間違い？」</p>
</div>
<div class="voice-father">
<p>お父さん「もちろん間違いじゃないよ。でも、RFS曲線の差は、再発だけでなく他因死の影響も反映しているよね。だから、さっきいったみたいに、OS、RFS、CIRは使い分けが必要になる」</p>
</div>
</div>
<div class="callout callout-style-simple callout-note callout-titled" title="このエピソードに関係するクイズです">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
このエピソードに関係するクイズです
</div>
</div>
<div class="callout-body-container callout-body">
<p>CDISC ADaM ADTTE（Analysis Data Model for Time-to-Event Endpoints）は、製薬企業が行う臨床試験データの標準規格です。この規格では、打ち切りにはCNSRという変数名の変数を用いることになっています。打ち切りを表すコーディングは、次のうちどちらでしょう。</p>
<ol type="1">
<li>CNSR=0</li>
<li>CNSR=1</li>
</ol>
</div>
</div>
<div class="callout callout-style-simple callout-note callout-titled" title="答えはこちら">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-11-contents" aria-controls="callout-11" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
答えはこちら
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-11" class="callout-11-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<ul>
<li><strong>正解は2です</strong></li>
</ul>
<p>CDISC ADaM ADTTEでは、1がTRUEを表しています。<code>Event()</code>や<code>Surv()</code>など多くの統計パッケージのデフォルトでは、イベント=1、打ち切り=0というコーディングを想定しています。CNSRをそのまま用いることはできません。</p>
</div>
</div>
</div>
</section>
<section id="エピソード用語集rスクリプト" class="level3">
<h3 class="anchored" data-anchor-id="エピソード用語集rスクリプト">エピソード、用語集、Rスクリプト</h3>
<ul>
<li><a href="study-design-1.html">A Story of Coffee Chat and Research Hypothesis</a></li>
<li><a href="study-design-2.html">Data Have Types: A Coffee-Chat Guide to R Functions for Common Outcomes</a></li>
<li><a href="study-design-3.html">Outcomes: The Bridge from Data Collection to Analysis</a></li>
<li><a href="study-design-4.html">A First Step into Survival and Competing Risks Analysis with R</a></li>
<li><a href="study-design-5.html">When Bias Creeps In: Selection, Information, and Confounding in Clinical Surveys</a></li>
<li><a href="glossary.html">Statistical Terms in Plain Language</a></li>
<li><a href="../from-coffee-chat-to-r/study-design.R">study-design.R</a></li>
</ul>


</section>
</section>

 ]]></description>
  <guid>https://gestimation.github.io/coffee-and-research/jp/study-design-4.html</guid>
  <pubDate>Fri, 12 Dec 2025 15:00:00 GMT</pubDate>
</item>
<item>
  <title>When Bias Creeps In: Selection, Information, and Confounding in Clinical Surveys</title>
  <link>https://gestimation.github.io/coffee-and-research/jp/study-design-5.html</link>
  <description><![CDATA[ 




<div class="hero-header">
<p><img src="https://gestimation.github.io/coffee-and-research/image/father-daughter.png" class="hero-header-img img-fluid"></p>
</div>
<section id="study-design-v-when-bias-creeps-in" class="level1">
<h1>Study Design V − When Bias Creeps In</h1>
<div class="serif-block text-right">
<p>Keywords: bias, language &amp; writing, observational study, study design</p>
</div>
<hr>
<section id="調査で気をつけておくべきバイアス" class="level3">
<h3 class="anchored" data-anchor-id="調査で気をつけておくべきバイアス">調査で気をつけておくべきバイアス</h3>
<div class="dialogue">
<div class="voice-daughter">
<p>私「ただいまーつかれたー。お父さん、甘いものない？」</p>
</div>
<div class="voice-father">
<p>お父さん「いちご大福ならあるよ。コーヒーもちょうど淹れたところだ」</p>
</div>
<div class="voice-daughter">
<p>私「ああ助かる。この時間帯に仕事が終わるとちょうど満員電車でさ、きついんだよね。診療時間の間もハードだったし」</p>
</div>
<div class="voice-father">
<p>お父さん「おつかれさま。コーヒーはいったよ」</p>
</div>
<div class="voice-daughter">
<p>私「ありがとう。あのさ、<strong>ハードなエンドポイント</strong>と<strong>ソフトなエンドポイント</strong>って言い回しがあるじゃない？」</p>
</div>
<div class="voice-father">
<p>お父さん「あるね」</p>
</div>
<div class="voice-daughter">
<p>私「臨床試験にあこがれてる先輩がいてね、復職状況はソフトなエンドポイントだからだめだ、全生存期間（OS）はハードなエンドポイントだからいいんだ、みたいな言い方をするのよ。私の調査が否定されてるみたいなんだけど、どういうことなのか、よくわかんなくて」</p>
</div>
<div class="voice-father">
<p>お父さん「確かにがん臨床試験はOSをエンドポイントにすることが多いけど、それを基準にダメ出しするのもどうかと思うけどね。それに、慣用的にハード・ソフトっていう表現が用いられるけど、その意味を正確に伝えるなら、客観的・主観的って言った方がいいんじゃないかな」</p>
</div>
<div class="voice-daughter">
<p>私「客観的？主観的？」</p>
</div>
<div class="voice-father">
<p>お父さん「よくある議論を挙げると、OSはハード、無増悪生存期間（PFS）はソフトというのがある。OSは死亡日と最終生存確認日だけで決まるから、ハードなエンドポイント。PFSでは、死亡とがんの増悪がイベントとして定義されるんだけど、そうするとデータを集めるために増悪日の情報が必要になる。ところが臨床的には増悪がいつ起きたかは、主観的に判断されるケースがあるよね。全身状態や腫瘍マーカーが悪化したりするケースだね。臨床試験で、こういうケースをイベントとみなすかは議論がわかれるけど、意見がわかれること自体でPFSはソフトなエンドポイントっていう人もいるね」</p>
</div>
<div class="voice-daughter">
<p>私「なるほど、ハード=客観的、ソフト=主観的ってことね。たしかに、私の調査票はソフトなエンドポイントっていわれるわけだ。そもそも患者さんの主観を尋ねるための調査だもんね」</p>
</div>
<div class="voice-father">
<p>お父さん「まあ、その先輩が伝えたかったのは、復職状況を調べるうえで、できるだけあいまいな部分を排除して、客観的に測定しなさいってことじゃない？調査対象者が、退院後の就労日を正確に回答してくれるなら、十分に客観的な測定ができていると思うけどね」</p>
</div>
<div class="voice-daughter">
<p>私「じゃあさ、ハードなエンドポイントにはバイアスがない、ソフトなエンドポイントにはバイアスがあるって考えていい？」</p>
</div>
<div class="voice-father">
<p>お父さん「主観が入るとバイアスが生じやすいとはいえるけど、そんなに単純じゃないかな。調査がいい加減だったら、死亡が完全に特定できず、死亡率を過小評価することだってあるもの。ちょっとたばこを吸っていい？」</p>
</div>
<div class="voice-daughter">
<p>私「どうぞご自由に。死亡調査って大変だよね」</p>
</div>
<div class="voice-father">
<p>お父さん「そうそう。もっと細かいことをいうとね、死亡に至るまで100%の情報を集める必要はないんだ。でも、それは死亡情報の収集に偏りがないときだけ。<strong>死亡情報が集まるかどうかが、患者の健康状態に依存してしまうと、バイアスの原因になる</strong>。これは生存時間データの打ち切りが、ランダムでなくなるからなんだ。この前、RのKaplan-Meier曲線とAalen-Johansen曲線をみせたよね。あの曲線は、打ち切りがあっても描ける。でもバイアスがなく正確であるためには、打ち切りが、病状や予後とは関係なくランダムに起きていることが前提になってる。たとえば追跡期間が1年って決まっていて、全員1年で打ち切りになるとか、外的要因のため一部の患者で観察が続けられなくなるとかね。結局、情報が偏るとバイアスが生じるのは、ハードなエンドポイントでもソフトなエンドポイントでも同じこと」</p>
</div>
<div class="callout callout-style-simple callout-note callout-titled" title="ランダム誤差とバイアス">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
ランダム誤差とバイアス
</div>
</div>
<div class="callout-body-container callout-body">
<p>統計学は誤差を扱う学問ですが、臨床研究では<strong>ランダム誤差（random error）</strong>と<strong>バイアス（bias）</strong>を区別することが大切です。ランダム誤差は、基本的にはゼロを中心としたばらつきを想定しています。一方で、得られた推定値が真の値から系統的にずれていることを、バイアスといいます。臨床研究における統計学の目標は、ランダム誤差を制御し、バイアスを可能な限りゼロに近づけることです。</p>
<p>たとえるなら、ランダム誤差は的の中心を狙って矢を放つときのばらつき、バイアスは狙いが中心からずれている状態といえます。競合リスクの扱いを間違ったとき生じるKaplan-Meier曲線のバイアスは、ランダム誤差ではありませんよね。ランダム誤差はサンプルサイズを大きくすることで減少させることができますが、バイアスは研究デザインやデータ収集方法を工夫しないと、解消できません。</p>
<p><img src="https://gestimation.github.io/coffee-and-research/jp/study-design-5j.png" class="img-fluid"></p>
</div>
</div>
<section id="バイアスの分類" class="level3">
<h3 class="anchored" data-anchor-id="バイアスの分類">バイアスの分類</h3>
<div class="voice-daughter">
<p>私「そりゃあ、データが偏ったらバイアスっていうのは私にもわかるけど。死亡情報が集められないのはどうしようもないときだもの。ベストを尽くすしかないよね。じゃあさ、私の調査で、それ以外に気をつけておいた方がいいバイアスってある？」</p>
</div>
<div class="voice-father">
<p>お父さん「そうだね。調査票を郵送するんでしょ。そういうとき、<strong>回答してくれない患者が多いと偏りが生じやすい</strong>から、回答率を上げるように工夫するといい。たとえば、調査票で年収って聞いてる？」</p>
</div>
<div class="voice-daughter">
<p>私「聞くかもしれない」</p>
</div>
<div class="voice-father">
<p>お父さん「経済状況のようなナイーブな質問内容には十分配慮した方がいいよ。それが理由で回答してくれないと、解析対象集団が調査対象全体を代表しているといえなくなってしまう」</p>
</div>
<div class="voice-daughter">
<p>私「他には？」</p>
</div>
<div class="voice-father">
<p>お父さん「他にはね、ストーマ非保有者よりストーマ保有者の方が、調査票への回答率が高くなっちゃうとか。そもそもストーマ非保有者とストーマ保有者の回答率に差があると、これらの集団を比較してもバイアスがあるって批判されるかもしれない」</p>
</div>
<div class="voice-daughter">
<p>私「それって<strong>交絡</strong>のこと？」</p>
</div>
<div class="voice-father">
<p>お父さん「交絡ってどこで聞いたの？よく知ってるね。あれもバイアスの一種だけど、今回のとは違う。回答率の差やなにか理由があって回答してくれない場合は、母集団からのサンプル抽出に影響する<strong>選択バイアス</strong>といって、区別されるんだ。それに、年収って尋ねられると、過大申告してしまいがちだよね。このように集めた情報自体に偏りがあることを、<strong>情報バイアス</strong>と呼んでいる。調査や観察研究の計画に関する授業では、バイアスを3種類に大別して考えるといいって教えている。</p>
</div>
<ul>
<li><p>選択バイアス（selection bias）</p></li>
<li><p>情報バイアス（information bias）</p></li>
<li><p>交絡（confounding）</p></li>
</ul>
<div class="voice-father">
<p>実際に研究を行うといろいろな理由でバイアスが生じるけど、研究デザインの段階では、この3つに分けて考えると対策を立てやすい。一部の対象者ばかり選ばれないようにしなさい、情報を集めるときはバイアスが入らないように配慮しなさい、集団を比較するときは、比較したい要因以外の特徴を揃えるようにしなさいってね」</p>
</div>
<div class="voice-daughter">
<p>私「ふーん？選択バイアス、情報バイアスねえ？やっぱり臨床研究って言葉遣いがよくわかんないな」</p>
</div>
</section>
</div>
</section>
<section id="up-to-this-point-we-have-been-talking-about-the-essence-of-research-how-we-frame-research-questions-and-plan-to-obtain-unbiased-answers.-the-following-episodes-step-away-from-study-design-and-begin-to-reflect-on-observed-effects-and-their-uncertainty-how-we-reason-about-causes-and-what-ultimately-becomes-publishable." class="level3">
<h3 class="anchored" data-anchor-id="up-to-this-point-we-have-been-talking-about-the-essence-of-research-how-we-frame-research-questions-and-plan-to-obtain-unbiased-answers.-the-following-episodes-step-away-from-study-design-and-begin-to-reflect-on-observed-effects-and-their-uncertainty-how-we-reason-about-causes-and-what-ultimately-becomes-publishable.">Up to this point, we have been talking about the essence of research — how we frame research questions and plan to obtain unbiased answers. The following episodes step away from study design and begin to reflect on observed effects and their uncertainty, how we reason about causes, and what ultimately becomes publishable.</h3>
<ul>
<li><a href="frequentist-1.html">Reading a Paper over a Cup of Coffee</a></li>
<li><a href="frequentist-2.html">P-Value Explanations That Seem Plausible at First Glance</a></li>
<li><a href="frequentist-3.html">Beyond 0.05: Interpreting P-Values in a Clinical Trial</a></li>
</ul>
</section>
<section id="過去のエピソード" class="level3">
<h3 class="anchored" data-anchor-id="過去のエピソード">過去のエピソード</h3>
<ul>
<li><a href="study-design-1.html">A Story of Coffee Chat and Research Hypothesis</a></li>
<li><a href="study-design-2.html">Data Have Types: A Coffee-Chat Guide to R Functions for Common Outcomes</a></li>
<li><a href="study-design-3.html">Outcomes: The Bridge from Data Collection to Analysis</a></li>
<li><a href="study-design-4.html">A First Step into Survival and Competing Risks Analysis with R</a></li>
<li><a href="study-design-5.html">When Bias Creeps In: Selection, Information, and Confounding in Clinical Surveys</a></li>
<li><a href="glossary.html">Statistical Terms in Plain Language</a></li>
<li><a href="../from-coffee-chat-to-r/study-design.R">study-design.R</a></li>
</ul>


</section>
</section>

 ]]></description>
  <guid>https://gestimation.github.io/coffee-and-research/jp/study-design-5.html</guid>
  <pubDate>Fri, 12 Dec 2025 15:00:00 GMT</pubDate>
</item>
<item>
  <title>Outcomes: The Bridge from Data Collection to Analysis</title>
  <link>https://gestimation.github.io/coffee-and-research/jp/study-design-3.html</link>
  <description><![CDATA[ 




<div class="hero-header">
<p><img src="https://gestimation.github.io/coffee-and-research/image/father-daughter.png" class="hero-header-img img-fluid"></p>
</div>
<section id="study-design-iii-outcomes-the-bridge-from-data-collection-to-analysis" class="level1">
<h1>Study Design III − Outcomes: The Bridge from Data Collection to Analysis</h1>
<div class="serif-block text-right">
<p>Keywords: clinical trial, language &amp; writing, research hypothesis, survival &amp; competing risks</p>
</div>
<hr>
<section id="アウトカムってなに" class="level3">
<h3 class="anchored" data-anchor-id="アウトカムってなに">アウトカムってなに？</h3>
<div class="dialogue">
<div class="voice-daughter">
<p>私「さっきのアウトカムについてなんだけどね。診療科内で臨床試験の論文を読むんだけど、そこで出てくる”DFS”とか”RFS”とかの略語もアウトカムだよね？実はよくわからないんだけど、当たり前のように使われているから質問しにくいんだ。DFSとRFS、どっちもがんの再発を調べてるみたいなんだけど。お父さん詳しい？」</p>
</div>
<div class="voice-father">
<p>お父さん「もちろん統計解析でDFSを扱うことはあるよ。一番よく出てくるOSは全生存期間（overall survival）だよね。DFSは無病生存期間（disease-free survival）、RFSは無再発生存期間（relapse-free survival）のこと」</p>
</div>
<div class="voice-daughter">
<p>私「無再発生存期間って再発までの日数のこと？」</p>
</div>
<div class="voice-father">
<p>お父さん「再発までの日数だったら無再発期間(relapse-free time)とかって言葉を選ぶかなあ。累積再発率（cumulative incidence of relapse）やCIRって呼ぶことの方が多いけど」</p>
</div>
<div class="voice-daughter">
<p>私「よけいにわからん。ぜんぶ同じじゃないの？」</p>
</div>
<div class="voice-father">
<p>お父さん「生存時間解析ではね、細かいけど違うんだ。再発を経験せずに、死亡することもあるでしょ。無病生存期間のポイントは、再発・2次がん・死亡のうち、<strong>どれか最初のイベントまでの時間</strong>を扱うこと。だから、再発だけでなく、死亡したり別のがんを発症したりしたときも、イベントとして扱われるんだ」</p>
</div>
<div class="voice-daughter">
<p>私「イベント扱いって？」</p>
</div>
<div class="voice-father">
<p>お父さん「生存時間データは、一般に特定のイベントまでの経過時間なんだ。端的にいうとね、無病生存期間のデータから“3年無病生存確率”を計算するとするでしょ。それは“イベントが起こらない確率”に相当するんだけど、意味合いとしては3年時点で、再発も2次がんも経験せず、生存できる確率を求めることになる」</p>
</div>
<div class="voice-daughter">
<p>私「そういうことか」</p>
</div>
<div class="voice-father">
<p>お父さん「RFSでは、イベントは死亡と再発にするのが普通。つまり二次がんはイベントに含めない。無再発期間だったらイベントは再発だけ。図をみたら、イメージしやすくなるかな」</p>
</div>
<p><img src="https://gestimation.github.io/coffee-and-research/jp/study-design-3j.png" class="img-fluid"></p>
<div class="voice-daughter">
<p>私「ふんふん。私はね、無病生存期間の結果が重要だと思うな。再発と2次がん、どっちも起きない方がいい。無再発期間はあまり解析する意味を感じないな。死亡は一番重要なイベントじゃない？なんで省いちゃうのよ」</p>
</div>
<div class="voice-father">
<p>お父さん「そうだね。でも、がんが再発した後に死亡した患者は、無再発期間だったとしてもイベント扱いになるよね」</p>
</div>
<div class="voice-daughter">
<p>私「確かにね。よく考えたら、再発前に亡くなるケースって、感染症とか、交通事故とかだね。がん治療や原病とは関係ないかもしれない」</p>
</div>
<div class="voice-father">
<p>お父さん「臨床試験で用いられるアウトカムは、”エンドポイント”とよばれることもあるよね。研究によって研究仮説が違うから、それにあわせて様々なエンドポイントが選ばれる。進行がんではがんの増悪に注目した無増悪生存期間、根治切除後の研究では無再発生存期間とかね。表に、がん臨床試験の主な生存時間エンドポイントを整理してあげるよ（Japan Clinical Oncology Group 2021）」</p>
</div>
<table class="caption-top table">
<colgroup>
<col style="width: 16%">
<col style="width: 16%">
<col style="width: 16%">
<col style="width: 16%">
<col style="width: 16%">
<col style="width: 16%">
</colgroup>
<thead>
<tr class="header">
<th>エンドポイント</th>
<th>イベント1</th>
<th>イベント2</th>
<th>イベント3</th>
<th>イベント4</th>
<th>打ち切り日</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>全生存期間</td>
<td>死亡</td>
<td></td>
<td></td>
<td></td>
<td>最終生存確認日</td>
</tr>
<tr class="even">
<td>無増悪生存期間</td>
<td>死亡</td>
<td>増悪/再発</td>
<td></td>
<td></td>
<td>最終無増悪確認日</td>
</tr>
<tr class="odd">
<td>無再発生存期間</td>
<td>死亡</td>
<td>再発</td>
<td></td>
<td></td>
<td>最終生存確認日</td>
</tr>
<tr class="even">
<td>無再発期間</td>
<td>再発</td>
<td></td>
<td></td>
<td></td>
<td>最終生存確認日</td>
</tr>
<tr class="odd">
<td>無病生存期間</td>
<td>死亡</td>
<td>再発</td>
<td>2次がん</td>
<td></td>
<td>最終生存確認日</td>
</tr>
<tr class="even">
<td>無イベント生存期間</td>
<td>死亡</td>
<td>寛解導入失敗</td>
<td>再発</td>
<td>2次がん</td>
<td>最終生存確認日</td>
</tr>
<tr class="odd">
<td>治療成功期間</td>
<td>死亡</td>
<td>治療中止（治療中の増悪/再発を含む）</td>
<td>プロトコール治療完了後の増悪/再発</td>
<td></td>
<td>最終治療継続確認日または最終無増悪確認日</td>
</tr>
</tbody>
</table>
<div class="voice-daughter">
<p>私「でかした！」</p>
</div>
<div class="voice-father">
<p>お父さん「この表は、臨床試験グループが研究計画書を作るときのものなんだ。研究計画書は、医師や統計家がチームになって書くからね。定義を決めておかないと混乱する。このグループでは”one word one meaning”がモットーなんだ」</p>
</div>
<div class="voice-daughter">
<p>私「だよね、私もこんがらがり中だわ」</p>
</div>
<div class="voice-father">
<p>お父さん「OSは、<strong>生存時間の原点（time origin）</strong>から死亡するまでの期間のこと。DFSは、時間原点から再発、2次がん、死亡のうち、最初のイベントまでの期間のこと。でも、さっき言ったみたいに、3年OSとか3年DFSという言い方をすることもある。この場合は期間じゃなくて確率の意味になる。OSとDFSの違いは、再発と2次がんが含まれること。そうすると、3年OSより3年DFSの方が、確率は小さくなるよね」</p>
</div>
<div class="voice-daughter">
<p>私「時間原点ってはじめて聞いた。もう少し説明してよ」</p>
</div>
<div class="voice-father">
<p>お父さん「じゃあ、どの時点から生存時間をスタートするか、典型的な決め方をいくつか紹介しようか。まず、DFSは根治手術後の再発状況を調べるため用いられるアウトカムだよね。だから、”手術日”がこの場合の時間原点の候補になる。手術日のように治療の起点がはっきりしている状況だと決めやすいよね」</p>
</div>
<div class="voice-daughter">
<p>私「あーよくみるやつだわ」</p>
</div>
<div class="voice-father">
<p>お父さん「でしょ。一方で、もし”退院日”を時間原点にすると、手術直後の死亡が評価対象にならなくなっちゃうから、研究によってはそこを批判されるかもしれない。もうひとつ典型的な決め方を挙げると、臨床試験の登録日があるかな。ランダム化臨床試験だと、登録日に治療をランダムに割付けるから、それを原点にして生存曲線を描くのが自然だよね」</p>
</div>
<div class="voice-daughter">
<p>私「なるほどね、研究によって微妙に定義が違うもんね。実は今、調査票作っててね。お父さんがアウトカムにうるさいって周りに話したら、みんな意外とちゃんと区別してて。DFSとかOSを正確に知りたかったんだ。聞いてよかった、また相談するね」</p>
</div>
</div>
<div class="callout callout-style-simple callout-note callout-titled" title="臨床エンドポイントと代替エンドポイント">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-1-contents" aria-controls="callout-1" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
臨床エンドポイントと代替エンドポイント
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-1" class="callout-1-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>OS、DFS、RFSは、特に術後補助化学療法の有効性を評価するときに用いられるアウトカム（エンドポイントともいいます）です。それでは両者は、どのような考え方で使い分けられているのでしょうか。指針の1つになっているのが、医薬品の承認審査の考え方です。たとえば抗悪性腫瘍薬の臨床評価方法に関するガイドライン（厚生労働省2021）では、抗がん剤を承認するためには、生存期間の延長などにもとづき、確実な有効性を示す必要があると述べています。そのため、具体的な指標として、OSが<strong>臨床エンドポイント（clinical endpoint）</strong>とみなされ、こちらが重視されています（Biomarkers Definitions Working Group 2001）。</p>
<p>その一方で、術後補助化学療法としての抗がん剤の有効性を評価する臨床試験では、<strong>代替エンドポイント（surrogate endpoint）</strong>として採用することがあります。代替エンドポイントとは、臨床エンドポイントの代わりになることが意図されたもので、臨床上の便益・害の有無を予測することが期待されるものと定義されます。DFSのような代替エンドポイントを用いる最大のメリットは、試験期間が短くなることです。ただし、過去の承認審査では、代替エンドポイントの利用が誤った医薬品評価につながったケースが数多く報告されています（Fleming and DeMets 1996）。たとえば、進行大腸がんにおける5FU+ロイコボリン併用療法は、臨床試験で腫瘍縮小がみられたにもかかわらず、臨床エンドポイントであるOSを評価すると、ほとんど延命効果がないことが明らかになりました（Fleming and DeMets 1996）。</p>
</div>
</div>
</div>
<div class="callout callout-style-simple callout-note callout-titled" title="このエピソードに関係するクイズです">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
このエピソードに関係するクイズです
</div>
</div>
<div class="callout-body-container callout-body">
<p>がん臨床研究で用いられるアウトカムのひとつに無増悪生存期間（progression-free survival）があります。このアウトカムを測定するには、画像による腫瘍増悪の判定が必要になります。このとき、客観性を高めるため、第三者が画像をみて増悪を判定すると、主治医による増悪の判定と一致しないことがあり得ます。この問題は、中央判定と施設判定の不一致と呼ばれます。以下の選択肢のうち、対処法として適切でないものを選びなさい。</p>
<ol type="1">
<li>統計解析では、客観性が高い中央判定の結果を採用する</li>
<li>統計解析では、中央判定と施設判定のうち、先に起きたものを採用する</li>
<li>症例検討会を開き、中央判定と施設判定の結果が一致しない患者の扱いを医学的に決定する</li>
<li>中央判定を採用した解析と、施設判定を採用した解析の、2通りを行う</li>
</ol>
</div>
</div>
<div class="callout callout-style-simple callout-note callout-titled" title="答えはこちら">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-3-contents" aria-controls="callout-3" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
答えはこちら
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-3" class="callout-3-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<ul>
<li><strong>正解は2です</strong></li>
</ul>
<p>中央判定と施設判定のうち、先に起きたものを採用すると、無増悪生存期間が短くなる方向にバイアスが生じるため、適切ではありません。</p>
<p>ひとつだけ注意があります。施設判定ではなく中央判定を必ず採用すべき、というわけではありません。施設で増悪になった後、それが追跡状況や画像検査の頻度に影響したり、施設の担当医の治療方針が変化したりすることがあります。このような状況では、施設判定を用いることが適切かもしれません。</p>
</div>
</div>
</div>
</section>
<section id="文献" class="level3">
<h3 class="anchored" data-anchor-id="文献">文献</h3>
<ul>
<li><p>Biomarkers Definitions Working Group. Biomarkers and surrogate endpoints: preferred definitions and conceptual framework. Clin Pharmacol Ther 2001;69(3):89-95</p></li>
<li><p>Fleming TR and DeMets DL. Surrogate end points in clinical trials: are we being misled? Ann Intern Med 1996;125(7):605-13</p></li>
<li><p><a href="https://jcog.jp/doctor/tool/manual/">JCOGプロトコールマニュアル version 3.8 [Internet]. 東京: Japan Clinical Oncology Group; 2025</a></p></li>
<li><p><a href="https://www.pmda.go.jp/files/000243746.pdf">薬生薬審発0331第1号. 抗悪性腫瘍薬の臨床評価方法に関するガイドライン [Internet]. 東京: 厚生労働省医薬・生活衛生局医薬品審査管理課長; 2021</a></p></li>
</ul>
</section>
<section id="エピソード用語集rスクリプト" class="level3">
<h3 class="anchored" data-anchor-id="エピソード用語集rスクリプト">エピソード、用語集、Rスクリプト</h3>
<ul>
<li><a href="study-design-1.html">A Story of Coffee Chat and Research Hypothesis</a></li>
<li><a href="study-design-2.html">Data Have Types: A Coffee-Chat Guide to R Functions for Common Outcomes</a></li>
<li><a href="study-design-3.html">Outcomes: The Bridge from Data Collection to Analysis</a></li>
<li><a href="study-design-4.html">A First Step into Survival and Competing Risks Analysis with R</a></li>
<li><a href="study-design-5.html">When Bias Creeps In: Selection, Information, and Confounding in Clinical Surveys</a></li>
<li><a href="glossary.html">Statistical Terms in Plain Language</a></li>
<li><a href="../from-coffee-chat-to-r/study-design.R">study-design.R</a></li>
</ul>


</section>
</section>

 ]]></description>
  <guid>https://gestimation.github.io/coffee-and-research/jp/study-design-3.html</guid>
  <pubDate>Sun, 07 Dec 2025 15:00:00 GMT</pubDate>
</item>
<item>
  <title>A Story of Coffee Chat and Research Hypothesis</title>
  <link>https://gestimation.github.io/coffee-and-research/jp/study-design-1.html</link>
  <description><![CDATA[ 




<div class="hero-header">
<p><img src="https://gestimation.github.io/coffee-and-research/image/father-daughter.png" class="hero-header-img img-fluid"></p>
</div>
<section id="study-design-i-a-story-of-coffee-chat-and-research-hypothesis" class="level1">
<h1>Study Design I − A Story of Coffee Chat and Research Hypothesis</h1>
<div class="serif-block text-right">
<p>Keywords: language &amp; writing, observational study, research hypothesis, study design</p>
</div>
<hr>
<section id="はじめて研究に取り組む娘と統計家の父" class="level3">
<h3 class="anchored" data-anchor-id="はじめて研究に取り組む娘と統計家の父">はじめて研究に取り組む娘と統計家の父</h3>
<div class="dialogue">
<div class="voice-daughter">
<p>私「お父さんってさ、大学で統計学を教えてるんでしょ」</p>
</div>
<div class="voice-father">
<p>お父さん「そうだよ」</p>
</div>
<div class="voice-daughter">
<p>私「診療科の上司に、そろそろ研究して学会発表でもしてみないかって言われてさ。その先生、2016年がん対策基本法が改正されてからずっと、がん患者さんの就労支援に興味があるの。要するに、私にその調査をやらせたいみたい。まあやってみたくなくはないけどね。これって統計じゃない？」</p>
</div>
<div class="voice-father">
<p>お父さん「まあね。なにか臨床的に知りたいことや仮説はあるの？」</p>
</div>
<div class="voice-daughter">
<p>私「ないよ」</p>
</div>
<div class="voice-father">
<p>お父さん「仮説がないと調査がデザインできないよ」</p>
</div>
<div class="voice-daughter">
<p>私「まじか。データをとってから考えればいいと思ってた。うーん、やっぱり仕事を続けにくいのはどんな患者さんなのかが知りたいかな」</p>
</div>
<div class="voice-father">
<p>お父さん「女性より男性の方が、復職率が高いとか？」</p>
</div>
<div class="voice-daughter">
<p>私「性別にも興味あるけど、やっぱり知りたいのはがんのステージとか合併症とかかな。私が勤めているのは消化管外科なんだけど、ストーマをつけている患者さんは、手術前と同じ仕事を続けられているのだろうか、とか。うん、調査票つくってみる。ありがとう！」</p>
</div>
<div class="voice-father">
<p>お父さん「待ちなさい。調査対象は決まってるの？」</p>
</div>
<div class="voice-daughter">
<p>私「ん？うちの病院で手術したがん患者さん」</p>
</div>
<div class="voice-father">
<p>お父さん「胃がんでストーマを造設することってあるの？」</p>
</div>
<div class="voice-daughter">
<p>私「ゼロじゃないけど、みたことない」</p>
</div>
<div class="voice-father">
<p>お父さん「でしょ。ストーマに興味があるなら、胃がんは外した方がいいんじゃない？」</p>
</div>
<div class="voice-daughter">
<p>私「そうかなあ」</p>
</div>
<div class="voice-father">
<p>お父さん「デザイン段階で、どのような対象に調査すべきか考えておくことは大切だよ。一般論だけど、対象集団を狭く限定した方が、質問項目を詳細にできるから。それに<strong>比較可能性（comparability）</strong>も高まる。ストーマ保有者と非保有者を比べるなら、がん種は統一したいよね」</p>
</div>
<div class="voice-daughter">
<p>私「比較可能性とかお硬い言い方するね。でも、患者さんの背景がばらけるとやりにくいよね。なるべく揃っている方が比較しやすい、ってことはわかるよ」</p>
</div>
<div class="voice-father">
<p>お父さん「比較可能性を高めるための統計手法やRパッケージもある。回帰調整のための<code>glm()</code>やプロペンシティスコア調整のための<code>CBPS()</code>とかね。一方で、対象集団は広い方が、<strong>一般化可能性（generalizability）</strong>が高い。がんサバイバーの復職率を推定したいんだったら、がん種を限定する必要はないし、できれば複数の施設で調査したいよね」</p>
</div>
<div class="voice-daughter">
<p>私「確かに、うちの病院だけだと実態調査っていいにくい気もしてきた。一般化可能性が高い研究をしなさいっていうのは、ほかの施設の参考になるデータをとれって意味だよね」</p>
</div>
<div class="voice-father">
<p>お父さん「うんうん。大学の授業だとね、こんな風に教えてるよ。</p>
<blockquote class="blockquote">
<p>研究で調べたい疑問がはっきりしないなら、“PICO”と”PECO”という要素を使って 研究をデザインしなさい</p>
</blockquote>
<p>研究の要素をひとつひとつ決めていく計画の立て方を、研究の構造化っていったりする」</p>
</div>
<div class="voice-daughter">
<p>私「構造化？実際怪しいな、そこ。いや、聞いたことはある」</p>
</div>
<div class="voice-father">
<p>お父さん「じゃあ軽く整理しよう。たとえばPICO/PECOのPは、患者（Patients）または集団（Population）の頭文字をとっている。どのような患者が対象かが、研究デザインの大切な1要素だってこと」</p>
</div>
</div>
<ul>
<li>どのような患者が対象か（Patients/Population）</li>
<li>どのような要因に注目するか（Intervention/Exposure）</li>
<li>それを何と比較するのか（Comparison）</li>
<li>患者にどのようなアウトカムが生じたのか（Outcome）</li>
</ul>
<div class="dialogue">
<div class="voice-daughter">
<p>私「ExposureとComparisonははじめて聞いたけど、私の場合はストーマ保有者と非保有者ってことだよね。Outcomeってなに？」</p>
</div>
<div class="voice-father">
<p>お父さん「PICO/PECOのOはアウトカムっていって、治療結果や、転帰、予後のこと。統計解析ではアウトカムのデータがいちばん重要。だから、計画でここを固めるのがポイントになる」</p>
</div>
<div class="voice-daughter">
<p>私「データが集まる前に固められなくない？」</p>
</div>
<div class="voice-father">
<p>お父さん「いや、データが集まっちゃったら変更が効かないでしょ。調査票を確定する前には決めておきたいよね。ああ。そうだね、アウトカムのイメージがまだないんだ。アウトカムはね、どんなデータをどうやって解析するかに関わってくる。解析結果を左右するからきちんと考えておいた方がいいんだ。データが集まった後は、どの統計ソフトを使うつもり？」</p>
</div>
<div class="voice-daughter">
<p>私「R。診療科の先輩が使ってるから」</p>
</div>
<div class="voice-father">
<p>お父さん「Rは得意？」</p>
</div>
<div class="voice-daughter">
<p>私「学部の頃、授業あったけどもうわすれたな」</p>
</div>
<div class="voice-father">
<p>お父さん「じゃあRの使い方も身につけなきゃだね。どの関数を使うかも、アウトカムによって違うんだよ」</p>
</div>
</div>
<div class="callout callout-style-simple callout-note callout-titled" title="臨床疑問と研究仮説">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
臨床疑問と研究仮説
</div>
</div>
<div class="callout-body-container callout-body">
<p>日常診療をしていると、さまざまな疑問や知りたいことが生じることがあります。診療現場から生まれたありのままの疑問のことを、<strong>臨床疑問（clinical question）</strong>といいます。臨床研究をスタートするとき、意識してほしいのは、臨床疑問を<strong>研究仮説（research hypothesis）</strong>として表現することです。研究仮説は、研究デザインに最低限必要な要素で構成されます。たとえば典型的な臨床研究では、以下のような要素が含まれることが多いでしょう。</p>
<ul>
<li>Patients/Population</li>
<li>Intervention/Exposure</li>
<li>Comparison</li>
<li>Outcome</li>
</ul>
<p>上の会話で出てきた”PICO”や”PECO”は、この頭文字をとったものです。I（Intervention＝介入）かE（Exposure＝曝露）かは、その研究が薬の臨床試験のような介入研究か、今回のがんサバイバー調査のような観察研究かによって変わります。観察研究には患者さん一人ひとりを追跡するコホート研究、ある時点からさかのぼって調査するケースコントロール研究、ある1時点における要因とアウトカムを調査する横断研究がありますが、いずれもPECOで構造化が可能です。</p>
<p>がんサバイバー調査を題材にして、研究仮説の例を3つ考えてみました。</p>
</div>
</div>
<div class="callout callout-style-simple callout-note callout-titled" title="研究仮説1">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-2-contents" aria-controls="callout-2" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
研究仮説1
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-2" class="callout-2-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<pre><code>P: 根治切除後の直腸がん患者

E: ストーマ造設あり

C: ストーマ造設なし

O: 手術後1年以内の復職の有無</code></pre>
<p>ストーマ保有者と非保有者の復職率を比較する研究を想定してみました。この場合Cをどうするかは悩ましい問題ですが、復職率の数字が得られただけでは、それが高いかどうか判断が難しいので、なんらかの比較対照を設定した方がよいでしょう。なお、比較可能性とは、この場合EとCを正しく比べられるということを意味します。</p>
</div>
</div>
</div>
<div class="callout callout-style-simple callout-note callout-titled" title="研究仮説2">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-3-contents" aria-controls="callout-3" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
研究仮説2
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-3" class="callout-3-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<pre><code>P: 根治切除後のがん患者

E: 「仕事とがん治療の両立お役立ちノート」の配布あり

C: 「仕事とがん治療の両立お役立ちノート」の配布なし

O: 手術後1年以内の復職の有無</code></pre>
<p>就労支援の一環として作成された「仕事とがん治療の両立お役立ちノート」の効果を調べようという研究です。患者Pは、直腸がんに限定せず、アウトカムOは、手術後の復職の有無としました。こうした方が、幅広い患者に当てはまる調査結果が得られますよね。これが一般化可能性の一例です。アウトカムについては、別の例として、患者満足度や患者の経済状態なども考えられるでしょう。</p>
</div>
</div>
</div>
<div class="callout callout-style-simple callout-note callout-titled" title="研究仮説3">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-4-contents" aria-controls="callout-4" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
研究仮説3
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-4" class="callout-4-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>「性・年齢、ステージ、術後補助化学療法、パフォーマンスステータス、合併症、ストーマ、手術前の就労状況、家計収入額、がん保険、就労支援サービスの利用などの因子は、1年以内の復職率と関連するか」</p>
<p>PECOになりにくい研究仮説もあります。たとえば、疾患発生と関連のあるリスク因子を探す、いわゆる探索的研究では、EとCははっきり決まっていません。構造化といっても、臨床疑問をかならずPECOの形式にしなければならないわけではありません。研究デザインに最低限必要な要素を特定することが大切です。</p>
</div>
</div>
</div>
<div class="dialogue">
<div class="voice-daughter">
<p>私「なるほどね、オリジナル仮説を立てろっていわれたら困るけど、研究の要素を洗い出して、ひとつひとつ決めていく作業はきらいじゃないわ。いつかは必要なことだし」</p>
</div>
<div class="voice-father">
<p>お父さん「そうでしょ。それに研究者の思考を、早い段階で専門的な表現に置き換えておくと、コミュニケーションもうまくなる。疾患やアウトカムの定義、治療や曝露内容は、医師や施設によって微妙な違いがあるものだからね。言葉をおろそかにすると混乱の種になる」</p>
</div>
</div>
<div class="callout callout-style-simple callout-note callout-titled" title="このエピソードに関係するクイズです">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
このエピソードに関係するクイズです
</div>
</div>
<div class="callout-body-container callout-body">
<p>研究計画を立てるとき、しばしば”ceteris paribus”というラテン語表現が登場します。この言葉の意味にいちばん近いのはどれでしょう。</p>
<ol type="1">
<li>因果関係があるなら必ず起こる</li>
<li>普遍的に一般化できる法則</li>
<li>他の条件が同じである</li>
<li>じゅうぶん多くのデータを観察する</li>
</ol>
</div>
</div>
<div class="callout callout-style-simple callout-note callout-titled" title="答えはこちら">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-6-contents" aria-controls="callout-6" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
答えはこちら
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-6" class="callout-6-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<ul>
<li><strong>正解は3です</strong></li>
</ul>
<p>“ceteris paribus”という概念は、比較可能性（comparability）を保つための条件と考えて問題ありません。</p>
</div>
</div>
</div>
</section>
<section id="エピソードとrスクリプト" class="level3">
<h3 class="anchored" data-anchor-id="エピソードとrスクリプト">エピソードとRスクリプト</h3>
<ul>
<li><a href="study-design-1.html">A Story of Coffee Chat and Research Hypothesis</a></li>
<li><a href="study-design-2.html">Data Have Types: A Coffee-Chat Guide to R Functions for Common Outcomes</a></li>
<li><a href="study-design-3.html">Outcomes: The Bridge from Data Collection to Analysis</a></li>
<li><a href="study-design-4.html">A First Step into Survival and Competing Risks Analysis with R</a></li>
<li><a href="study-design-5.html">When Bias Creeps In: Selection, Information, and Confounding in Clinical Surveys</a></li>
<li><a href="../from-coffee-chat-to-r/study-design.R">study-design.R</a></li>
</ul>


</section>
</section>

 ]]></description>
  <guid>https://gestimation.github.io/coffee-and-research/jp/study-design-1.html</guid>
  <pubDate>Sun, 30 Nov 2025 15:00:00 GMT</pubDate>
</item>
<item>
  <title>Data Have Types: A Coffee-Chat Guide to R Functions for Common Outcomes</title>
  <link>https://gestimation.github.io/coffee-and-research/jp/study-design-2.html</link>
  <description><![CDATA[ 




<div class="hero-header">
<p><img src="https://gestimation.github.io/coffee-and-research/image/father-daughter.png" class="hero-header-img img-fluid"></p>
</div>
<section id="study-design-ii-data-have-types" class="level1">
<h1>Study Design II − Data Have Types</h1>
<div class="serif-block text-right">
<p>Keywords: language &amp; writing, probability model, R simulation, survival &amp; competing risks</p>
</div>
<hr>
<section id="データには型がある" class="level3">
<h3 class="anchored" data-anchor-id="データには型がある">データには型がある</h3>
<div class="dialogue">
<div class="voice-daughter">
<p>私「コーヒー淹れたから、もう少し相談させてよ。さっきRの話がでたでしょ。そのとき、どの関数を使うかもアウトカムによって違うんだよっていってたじゃない？あれ、いまいちピンとこないんだけど。データなんて、全部数字じゃないの？」</p>
</div>
<div class="voice-father">
<p>お父さん「いいね、最近秋めいてきたからコーヒーがあるとありがたい。数字には違いないんだけどね。統計解析では、データの型がとても大事なんだ。代表的なのはこの4つ」</p>
</div>
</div>
<ul>
<li>連続データ</li>
<li>2値データなどの分類データ</li>
<li>計数データ</li>
<li>生存時間データ</li>
</ul>
<div class="dialogue">
<div class="voice-daughter">
<p>私「連続データって、年齢とか血圧みたいな測るやつでしょ？2値データもわかるよ。私の調査で比較したいストーマ保有あり・なしとか」</p>
</div>
<div class="voice-father">
<p>お父さん「ご名答。で、計数データは、交通事故の発生件数のような、数をカウントしたデータのこと。生存時間データは、たとえば寿命とかだね。死亡など特定のイベントが起こるまでの時間を扱うデータだよ。今回のがんサバイバー調査でいえば、手術から復職までの時間とか、再発までの時間とかね」</p>
</div>
<div class="voice-daughter">
<p>私「いわれてみれば、たしかに種類が違うね。でも、昔受けたRの授業では、言われた通りにコード打ってただけだったなあ。<code>glm()</code>とか<code>survfit()</code>とか、なんかよくわからないことばを」</p>
</div>
<div class="voice-father">
<p>お父さん「そうだね。パソコンある？」</p>
</div>
<div class="voice-daughter">
<p>私「へ」</p>
</div>
<div class="voice-father">
<p>お父さん「パソコン。あるでしょ。RStudioインストールしよう」</p>
</div>
<div class="voice-daughter">
<p>私「はあ、まあ声を掛けたのはこっちだからいいけど」</p>
</div>
<div class="voice-father">
<p>お父さん「Rではね、連続データを解析するなら、<code>mean()</code>、<code>t.test()</code> なんかがよく使われる」</p>
</div>
<div class="voice-daughter">
<p>私「はあ」</p>
</div>
<div class="voice-father">
<p>お父さん「2値データを集計するときは<code>table()</code>。p値を計算するときは<code>fisher.test()</code>。複雑な解析は<code>glm(family = binomial)</code> みたいな回帰モデル。生存時間データだと、<code>survfit()</code>、<code>coxph()</code>、それから<code>cifplot()</code>みたいな関数が出てくる」</p>
</div>
<div class="voice-daughter">
<p>そんなにいっぱい覚えられるわけないでしょ。Rの授業でも思ってたけど、そんなのあたかも呪詛なんだって」</p>
</div>
<div class="voice-father">
<p>お父さん「覚えなくていいよ」</p>
</div>
<div class="voice-daughter">
<p>私「え、いいの？」</p>
</div>
<div class="voice-father">
<p>お父さん「大事なのは、どの型のデータに、どんなR関数をあてるのかをイメージできること。もっといえば、どんな確率分布を仮定しているかを、なんとなくでいいから思い浮かべてほしいんだ」</p>
</div>
<div class="voice-daughter">
<p>私「確率分布？」</p>
</div>
<div class="voice-father">
<p>お父さん「学部でやったでしょ。<strong>正規分布（normal distribution）</strong>は聞いたことある？2値データの<strong>2項分布（binomial distribution）</strong>は？」</p>
</div>
<div class="voice-daughter">
<p>私「それくらいはね」</p>
</div>
<div class="voice-father">
<p>お父さん「単なるデータの記述より高度な統計手法では、裏でなんらかの<strong>確率モデル（probability model）</strong>を考えてる。生存時間データだと、標準的に使われるモデルってわけじゃないんだけど、一番シンプルな分布は<strong>指数分布（exponential distribution）</strong>っていうんだ」</p>
</div>
<div class="voice-daughter">
<p>私「知らんな。呪詛」</p>
</div>
<div class="voice-father">
<p>お父さん「そうだね、人間が使う言葉とは思えないとはこっちも思うよ。でも、本題に入る前につまづいたらもったいない。もし、統計でわからない言葉が出てきたら、<a href="glossary.html"><strong>いつでも質問においで</strong></a>。まあ、とにかく、どのデータの型にどんな確率モデルを使うのか、パターンを知ることだね」</p>
</div>
<div class="voice-daughter">
<p>私「はあ。それとRが関係するわけ？」</p>
</div>
<div class="voice-father">
<p>お父さん「うん。たとえばさ、これは覚えてほしいんだけど、<strong>割合（proportion）</strong>と<strong>率（rate）</strong>っていう指標がある。日常生活でもよく使うでしょ？交通事故の発生率とか。でも、日常では、割合と率の違いを意識しないよね。でも、統計の世界では、割合は2項分布のパラメータ、率はPoisson分布っていう別の確率分布のパラメータなんだ。Poisson分布は少しマニアックだけど」</p>
</div>
<div class="voice-daughter">
<p>私「割合と率なんて同じ意味でしょ？」</p>
</div>
<div class="voice-father">
<p>お父さん「違う違う。割合ってパーセントで表すでしょ、女性割合が60%とか。でも、“東京都の1年あたりの交通事故の発生率”を例に考えてみてよ。パーセントにならなくない？交通事故が何回、起きたかを年で割ってるだけだから」</p>
</div>
<div class="voice-daughter">
<p>私「ふーん。続けたまえ」</p>
</div>
<div class="voice-father">
<p>お父さん「教科書どおりじゃなくていいんだ。“あ、これは正規分布っぽい連続データだから、このあたりの関数かな”とか、0/1のデータだから、このへんの関数かなって、感覚で結びつけられるといいよ。そうするとRの関数もずっと覚えやすくなる」</p>
</div>
<div class="voice-daughter">
<p>私「なるほどね。データの型と分布をイメージできれば、R関数丸暗記不要ってことね。そいつははかどるわ」</p>
</div>
<div class="voice-father">
<p>お父さん「そうそう。イメージがあれば、あとでマニュアルや本を見たときに、ああ、これのことかってつながるからね。じゃあ、Rでちょっとだけデモを見せてみようか。年齢（連続）、性別とストーマ（2値）、生存時間（生存時間データ）をシミュレーションして、簡単な解析をやってみるよ。使うのは正規分布、2項分布、指数分布」</p>
</div>
<div class="voice-daughter">
<p>私「また呪文が出てくるんでしょ？」</p>
</div>
<div class="voice-father">
<p>お父さん「そうだね。とりあえず<code>library(ggplot2)</code>、<code>library(cifmodeling)</code>って打って。<strong>ヒストグラム</strong>と<strong>Kaplan-Meier曲線</strong>を教えるよ」</p>
</div>
<div class="voice-daughter">
<p>私「とりあえず思考停止で打つわ」</p>
</div>
<div class="voice-father">
<p>お父さん「教えてあげてるんだから思考停止しない。Rの機能を追加するとき、<code>install.packages()</code>と<code>library()</code>を使う。ざっくりいうとね、それぞれ、“Rパッケージをパソコンにインストールする”コマンドと、“インストール済みのパッケージを使えるようにする”コマンドなんだ」</p>
</div>
<div class="voice-daughter">
<p>私「ふむふむ。じゃあインストールの方は、一度やったら、それで終わり？」</p>
</div>
<div class="voice-father">
<p>お父さん「基本的にはそう。同じパソコンなら、インストールは原則1回でOK。たとえば、<code>install.packages("ggplot2")</code>は、CRANっていうパッケージの倉庫から、自分のパソコンにダウンロードする。<code>library(ggplot2)</code>は、<strong>ggplot2</strong>を取り出して、“これからグラフを描くからこの道具を使います”ってRに宣言する」</p>
</div>
<div class="voice-daughter">
<p>私「なるほど。ちょっとスッキリした。今まで毎回インストールしなきゃいけないのかなって思ってた」</p>
</div>
<div class="voice-father">
<p>お父さん「毎回インストールすると、“コーヒー淹れるたびに豆を買いに行く”ようなものだからね。豆はまとめて買っておいて、飲むときに挽けばいい。パッケージも同じだよ」</p>
</div>
</div>
<div class="callout callout-style-simple callout-note callout-titled" title="シミュレーションデータの生成">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
シミュレーションデータの生成
</div>
</div>
<div class="callout-body-container callout-body">
<p>ここでは、Rを使って簡単なシミュレーションデータを作り、連続データ・2値データ・生存時間データそれぞれについて、代表的な統計解析のデモをします。題材は「ストーマ保有者と非保有者の2群比較」です。</p>
<ul>
<li><p>年齢：正規分布<code>rnorm()</code>から生成した連続データ</p></li>
<li><p>性別・ストーマ保有：2項分布<code>rbinom()</code>から生成した2値データ</p></li>
<li><p>生存時間：指数分布<code>rexp()</code>から生成した生存時間データ</p></li>
</ul>
</div>
</div>
<div class="callout callout-style-simple callout-note callout-titled" title="Rコードと結果はこちら">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-2-contents" aria-controls="callout-2" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Rコードと結果はこちら
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-2" class="callout-2-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">set.seed</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">46</span>)</span>
<span id="cb1-2"></span>
<span id="cb1-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># ストーマ保有あり(1)/なし(0)</span></span>
<span id="cb1-4">stoma <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rbinom</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">200</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">prob =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.4</span>)</span>
<span id="cb1-5"></span>
<span id="cb1-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># 性別 0 = 女性, 1 = 男性</span></span>
<span id="cb1-7">sex <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rbinom</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">200</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">prob =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.5</span>)</span>
<span id="cb1-8"></span>
<span id="cb1-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># 年齢：正規分布から生成（ストーマあり群を少し高齢に）</span></span>
<span id="cb1-10">age <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rnorm</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">200</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">mean =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">65</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> stoma, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sd =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">8</span>)</span>
<span id="cb1-11"></span>
<span id="cb1-12"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># 生存時間：指数分布（ストーマあり群の予後の期待値10年、ストーマなし群の予後の期待値15年）</span></span>
<span id="cb1-13">hazard <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ifelse</span>(stoma <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">15</span>)</span>
<span id="cb1-14">time   <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rexp</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">200</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">rate =</span> hazard)</span>
<span id="cb1-15"></span>
<span id="cb1-16"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># ランダムな打ち切り（0 = 打ち切り, 1 = イベント）</span></span>
<span id="cb1-17">status <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rbinom</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">200</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">prob =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.9</span>)</span>
<span id="cb1-18"></span>
<span id="cb1-19">dat <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">data.frame</span>(</span>
<span id="cb1-20">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">age    =</span> age,</span>
<span id="cb1-21">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sex    =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">factor</span>(sex, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">levels =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">labels =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"WOMAN"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"MAN"</span>)),</span>
<span id="cb1-22">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">stoma  =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">factor</span>(stoma, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">levels =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">labels =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"WITHOUT STOMA"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"WITH STOMA"</span>)),</span>
<span id="cb1-23">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">time   =</span> time,</span>
<span id="cb1-24">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">status =</span> status</span>
<span id="cb1-25">)</span>
<span id="cb1-26"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">head</span>(dat)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>       age   sex         stoma      time status
1 59.19077 WOMAN WITHOUT STOMA 17.939751      1
2 59.46486   MAN WITHOUT STOMA 18.189251      1
3 55.34491   MAN WITHOUT STOMA  2.445121      1
4 60.68207   MAN WITHOUT STOMA 46.737429      1
5 61.79577   MAN WITHOUT STOMA  0.149128      1
6 62.84530 WOMAN    WITH STOMA  0.298167      1</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="callout callout-style-simple callout-note callout-titled" title="連続データと2値データの要約">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
連続データと2値データの要約
</div>
</div>
<div class="callout-body-container callout-body">
<p>まず、<strong>ggplot2</strong>パッケージの<code>ggplot()</code>と、<code>table()</code>を使って、ストーマあり群とストーマなし群のデータを<strong>ヒストグラム</strong>と<strong>分割表</strong>で記述しています。データを生成したときの設定を踏まえると、ヒストグラムでは、ストーマありとなしの間で、年齢の分布がずれているはずです。</p>
</div>
</div>
<div class="callout callout-style-simple callout-note callout-titled" title="Rコードと結果はこちら">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-4-contents" aria-controls="callout-4" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Rコードと結果はこちら
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-4" class="callout-4-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># install.packages("ggplot2") #インストールが必要なら実行</span></span>
<span id="cb3-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(ggplot2)</span>
<span id="cb3-3"></span>
<span id="cb3-4"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(dat, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> age, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> stoma)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb3-5"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_histogram</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">alpha =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.5</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">position =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"identity"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">bins =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb3-6"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"AGE"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"FREQUENCY"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"STOMA"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb3-7"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_minimal</span>()</span></code></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://gestimation.github.io/coffee-and-research/jp/study-design-2_files/figure-html/unnamed-chunk-2-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">table</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">STOMA =</span> dat<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>stoma, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">SEX =</span> dat<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>sex)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>               SEX
STOMA           WOMAN MAN
  WITHOUT STOMA    43  76
  WITH STOMA       44  37</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="callout callout-style-simple callout-note callout-titled" title="生存曲線による生存時間データの要約">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
生存曲線による生存時間データの要約
</div>
</div>
<div class="callout-body-container callout-body">
<p>次の生存時間データでは、<strong>cifmodeling</strong>パッケージの<code>cifplot()</code>を使って、<strong>Kaplan–Meier曲線</strong>を描いてみます。ストーマ保有者より、非保有者の方が、生存曲線が高くなる（生存期間が長くなる）はずです。生存時間データとその扱いについては、次とその次のエピソードでお話しします。</p>
</div>
</div>
<div class="callout callout-style-simple callout-note callout-titled" title="Rコードと結果はこちら">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-6-contents" aria-controls="callout-6" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Rコードと結果はこちら
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-6" class="callout-6-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># install.packages("cifmodeling") #インストールが必要なら実行</span></span>
<span id="cb6-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(cifmodeling)</span>
<span id="cb6-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cifplot</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">Event</span>(time, status) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> stoma,</span>
<span id="cb6-4">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data         =</span> dat,</span>
<span id="cb6-5">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">outcome.type =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"survival"</span></span>
<span id="cb6-6">)</span></code></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://gestimation.github.io/coffee-and-research/jp/study-design-2_files/figure-html/unnamed-chunk-3-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="callout callout-style-simple callout-note callout-titled" title="このエピソードに関係するクイズです">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
このエピソードに関係するクイズです
</div>
</div>
<div class="callout-body-container callout-body">
<p>2009～2014年にFDAによって承認されたがん領域の医薬品は、83品目あったそうです。奏効率（腫瘍縮小や完全寛解）がエンドポイントの臨床試験を根拠として承認されたのは、83品目のうち何割だったか、正しいものを選びなさい。</p>
<ol type="1">
<li>0～24%</li>
<li>25～49%</li>
<li>50～74%</li>
<li>75～100%</li>
</ol>
</div>
</div>
<div class="callout callout-style-simple callout-note callout-titled" title="答えはこちら">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-8-contents" aria-controls="callout-8" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
答えはこちら
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-8" class="callout-8-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<ul>
<li><strong>正解は2です</strong></li>
</ul>
<p>Kim and Prasad（2016）の総説論文によると、奏効率の結果に基づいて承認されたのは83品目のうち31品目と報告されています。また、エンドポイントの内訳は通常承認と加速承認では異なります。通常承認では、55品目のうち48品目が全生存期間、無増悪生存期間、無病生存期間で評価されたのに対し、加速承認では、奏効率を主要エンドポイントとする第II相試験の結果を根拠にした品目が大多数でした。</p>
</div>
</div>
</div>
</section>
<section id="文献" class="level3">
<h3 class="anchored" data-anchor-id="文献">文献</h3>
<ul>
<li>Kim C and Prasad V. Strength of validation for surrogate end points used in the US Food and Drug Administration’s approval of oncology drugs. Mayo Clin Proc 2016; S0025-6196(16)00125-7</li>
</ul>
</section>
<section id="エピソード用語集rスクリプト" class="level3">
<h3 class="anchored" data-anchor-id="エピソード用語集rスクリプト">エピソード、用語集、Rスクリプト</h3>
<ul>
<li><a href="study-design-1.html">A Story of Coffee Chat and Research Hypothesis</a></li>
<li><a href="study-design-2.html">Data Have Types: A Coffee-Chat Guide to R Functions for Common Outcomes</a></li>
<li><a href="study-design-3.html">Outcomes: The Bridge from Data Collection to Analysis</a></li>
<li><a href="study-design-4.html">A First Step into Survival and Competing Risks Analysis with R</a></li>
<li><a href="study-design-5.html">When Bias Creeps In: Selection, Information, and Confounding in Clinical Surveys</a></li>
<li><a href="glossary.html">Statistical Terms in Plain Language</a></li>
<li><a href="../from-coffee-chat-to-r/study-design.R">study-design.R</a></li>
</ul>


</section>
</section>

 ]]></description>
  <guid>https://gestimation.github.io/coffee-and-research/jp/study-design-2.html</guid>
  <pubDate>Sun, 30 Nov 2025 15:00:00 GMT</pubDate>
</item>
</channel>
</rss>
