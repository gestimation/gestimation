---
title: "Data Have Types: A Coffee-Chat Guide to R Functions for Common Outcomes"
format:
  html:
    toc: true
---

```{=html}
<style>
header#title-block-header.quarto-title-block {
  display: none !important;
}

body {
  margin: 0;
  background: #ffffff;
  color: #2b1f1a;
  font-family: "Inter", "Helvetica Neue", Arial, sans-serif;
  font-size: 18px;
  line-height: 1.55;
}

h1, h2, h3 {
  font-family: "Georgia", "Times New Roman", serif;
  color: #3a2a22;
  font-weight: 600;
}

h3 {
  margin-top: 2.4rem;
}

a {
  color: #8b4a24;
  text-decoration: none;
}
a:hover {
  color: #6f3718;
  text-decoration: underline;
}

.navbar {
  background: #ffffff !important;
  border-bottom: 1px solid #e6e0da;
  margin-bottom: 0 !important;
}
.navbar .navbar-brand,
.navbar .navbar-nav > li > a {
  color: #3a2a22 !important;
  border-bottom: 2px solid transparent;
  padding-bottom: 2px;
}
.navbar .navbar-nav > li > a:hover {
  border-bottom-color: #8b4a24;
}

.hero-text {
  padding: 1.5rem 0;
  color: #3a2a22;
}

.project-card {
  border: 1px solid #e6e0da;
  padding: 1.3rem 1.5rem;
  box-shadow: 0 1px 3px rgba(0,0,0,0.05);
  background: #ffffff;
  border-radius: 6px;
  margin-bottom: 1.5rem;
}

.about-section {
  border: 1px solid #e6e0da;
  padding: 1.5rem;
  border-radius: 0;
  background: #ffffff;
  margin-top: 2.5rem;
}

.about-section::after {
  content: "";
  display: block;
  clear: both;
}

.author-photo {
  float: left;
  margin-right: 1rem;
  border-radius: 50%;
}

.btn-link {
  display: inline-block;
  border: 1px solid #8b4a24;
  color: #8b4a24;
  padding: 0.4rem 0.9rem;
  font-size: 0.9rem;
  border-radius: 3px;
}
.btn-link:hover {
  background: #8b4a24;
  color: #ffffff;
}

.content-narrow {
  max-width: 1000px;
  margin: 0 auto;
  padding: 1.8rem 1.2rem 2.5rem;
}

.hero-header {
  margin-left: calc(50% - 50vw);
  margin-right: calc(50% - 50vw);
}

.hero-header-img {
  width: 100vw;
  height: min(400px, 45vh);
  object-fit: cover;
  object-position: 50% 40%;
  display: block;
}

.dialogue p {
  line-height: 1.7;
}
.dialogue .voice-father p {
  color: #7a3e1a !important;
}
.dialogue .voice-daughter p {
  color: #234f7c !important;
}
.dialogue .voice-daughter,
.dialogue .voice-father {
  margin-bottom: 0.4rem;
}

.text-right {
  text-align: right;
}
.serif-block p {
  font-family: "Georgia", "Times New Roman", serif;
  font-size: 0.9em;  line-height: 1.6;
}
</style>
```

::: hero-header
![](../image/father-daughter.png){.hero-header-img}
:::

# Study Design II − Data Have Types

::: {.serif-block .text-right}
probability model, simulation, survival/competing-risk, language/writing
:::

------------------------------------------------------------------------

This post is the second episode of my Story and Quiz series. Over a cup of coffee, a clinician daughter and her statistician father build a rough mental map from data types (continuous, binary, count, survival) to common R functions: `mean()`, `t.test()`, `glm()`, `fisher.test()`, `survfit()`, and `cifplot()`. We simulate a small stoma-surgery dataset in R, look at histograms, tables, and survival curves, and end with a short quiz about oncology endpoints and FDA approvals. If you’d like to start from the beginning, you can find the first episode here:   

[Study Design I − A Story of Coffee Chat and Research Hypothesis Hypothesis](https://gestimation.github.io/coffee-and-research/en/study-design-1.html)

### Four types of data items

::::::::::::::::::::::::::::::::: dialogue
::: voice-daughter
Me: "Okay, coffee is ready. Can I keep you a bit longer?”
::: 

::: voice-father
Dad: "If coffee is involved, yes. A warm cup is perfect now that the air’s turning autumn-like.”
::: 

::: voice-daughter
Me: "You said something earlier that stuck with me: the R function we use depends on the outcome. I didn’t really get that part. In my head, data are just...numbers? What’s there to distinguish?”
::: 

::: voice-father
Dad: "They’re all numbers, yes. But for statistics, the **type of data** matters a lot. Very roughly, we use four big categories."
::: 
::::::::::::::::::::::::::::::::: 

- Continuous data
- Binary / categorical data
- Count data
- Survival data

::::::::::::::::::::::::::::::::: dialogue
::: voice-daughter
Me: "**Continuous data** are things we measure, right? Like age or blood pressure. Binary data I get — like 'with stoma’ vs 'without stoma’ in my survey.”
::: 

::: voice-father
Dad: "Perfect. **Count data** is when you literally count events, like the number of traffic accidents. **Survival data** is things like lifespan — time from some starting point until an event, such as death. In your case, that could be time from surgery to returning to work, or time to relapse.”
::: 

::: voice-daughter
Me: "When you say it like that, they definitely feel like different beasts. But in the R course I took, we just typed whatever they put on the slides — `t.test()`, `glm()`, `survfit()`, all those things felt like magic spells.”
::: 

::: voice-father
Dad: "That’s a common side effect of R lectures. Do you have your laptop?”
::: 

::: voice-daughter
Me: "...Wait, what?”
::: 

::: voice-father
Dad: "Your laptop. You brought it, didn't you? Let’s install RStudio.”
:::

::: voice-daughter
Me: "...Well, I did ask for help, so fine.”
:::

::: voice-father
Dad: "In R, for continuous data you often use functions like `mean()` or `t.test()`.”
:::

::: voice-daughter
Me: "Okay...”
:::

::: voice-father
Dad: "To summarize binary data you can use `table()`. For p-values, `fisher.test()`. For more complex analyses, regression models like `glm(family = binomial)`. For survival data, you’ll see functions like `survfit()`, `coxph()`, and `cifplot()`.”
:::

::: voice-daughter
Me: "There is no way I can memorize all that. In class I just typed whatever they put on the slides. Those functions are basically incantations”
:::

::: voice-father
Dad: "You don’t need to memorize them.”
:::

::: voice-daughter
Me: "Wait, I don’t?”
:::

::: voice-father
Dad: "What matters is being able to picture which functions belong to which type of data. Or even better, imagining which probability distribution is being assumed.”
:::

::: voice-daughter
Me: "Probability distribution?”
:::

::: voice-father
Dad: "You learned this as an undergrad, didn't you? You've heard of the **normal distribution**—and **binomial distribution**?”
:::

::: voice-daughter
Me: "At least that one, yes.”
:::

::: voice-father
Dad: "Any statistical method beyond simple description rests on some kind of **probability model**. Normal distributions for continuous data, **binomial distributions** for binary data, **Poisson distributions** for count data. For survival data, there isn't a single standard model, but the simplest is the **exponential distribution**. You don’t have to remember the formulas, just the general matching.”

:::
:::::::::::::::::::::::::::::::::

- continuous: normal-ish  
- yes/no: binomial-ish  
- counts: Poisson-ish
- survival: nonparametric

::::::::::::::::::::::::::::::::: dialogue

::: voice-daughter
Me: "I don't know Poisson and exponential. Aren’t those basically curse words?"
:::

::: voice-daughter
Dad: "Yeah, I agree it doesn't sound like something humans would use. Statistical terms are often the hardest part. If a word ever feels unclear, [**feel free to come back to it anytime**](glossary.html). Anyway, the key is to learn the patterns—which probability model to use for which data type."
:::

::: voice-daughter
Me: "Uh-huh. And what does that have to do with R?"
:::

::: voice-father
Dad: "Quite a lot. I really want you to remember this, there are two common measures: **proportions** and **rates**. We use them all the time, like 'traffic accident rates'.
But in everyday language we don't distinguish them clearly. In statistics, though, a proportion is the parameter of a binomial distribution, and a rate is the parameter of a Poisson distribution." 
:::

::: voice-daughter
Me: "Proportions and rates... aren’t they basically the same thing? I’ve never really distinguished them."
:::

::: voice-father
Dad: "No, they're not. A proportion is usually a percentage, say, '60% of patients are women'. But consider 'the annual traffic accident rate in Tokyo'. You wouldn't naturally express that as a percentage. You're counting events and dividing by person-time or by years."
:::

::: voice-daughter
Me: "Hmm...go on, professor."
:::

::: voice-father
Dad: "You don't need rigid textbook definitions. It's enough if your brain can think: 'This looks like continuous data, probably close to a normal distribution, then you'll use functions in this area,' or 'This is 0/1 data, so you'll look for binomial-type functions.' If you can connect data types and distributions, R functions become much easier to recall."
:::

::: voice-daughter
Me: "I see. So if I imagine the data type and its distribution, I don't have to memorize R functions by brute force. That does sound efficient."
:::

::: voice-father
Dad: "Exactly. Once you have that mental image, when you later read manuals or books, you'll think, 'Oh, this is that thing I was imagining,' and everything clicks together. Okay, let me show you a quick demo in R. We'll simulate age (continuous), sex and stoma status (binary), and survival time, and run simple analyses. We will use the normal distribution, binomial distribution, and exponential distribution."
:::

::: voice-daughter
Me: "There it is again, the spell-casting."
:::

::: voice-father
Dad: "Pretty much. For now, type `library(ggplot2)` and `library(cifmodeling)`. I'll show you a **histogram** and **Kaplan-Meier curves**."
:::

::: voice-daughter
Me: "Fine. I’ll type them with my brain temporarily switched off. That’s how I survived my R class anyway."
:::

::: voice-father
Dad: "Don't turn your brain off while I'm teaching you. When you add features to R, you use `install.packages()` and `library()`. `install.packages()` installs a package onto your computer, and `library()` loads that installed package so you can use it."
:::

::: voice-daughter
Me: "Got it. That actually clears things up a lot. I really did think I had to install it every single time."
:::

::: voice-father
Dad: "Installing every time is like buying coffee beans every time you brew. No one does that. You buy the beans once and just grind when you drink."
:::
:::::::::::::::::::::::::::::::::::::::

::: {.callout-note appearance="simple" title="Generating simulated data"}
Here we’ll use R to create a simple dataset and run basic analyses for **continuous**, **binary**, and **survival** data. The theme is a two-group comparison: patients with and without a stoma.

- Age: continuous, from a normal distribution using `rnorm()`  

- Sex, stoma: binary, from a binomial distribution using `rbinom()`  

- Survival time: from an exponential distribution using `rexp()`
:::

::: {.callout-note appearance="simple" collapse="true" title="R code and output"}
```{r warning=FALSE}
set.seed(46)

# Stoma: 1 = with stoma, 0 = without stoma
stoma <- rbinom(200, size = 1, prob = 0.4)

# Sex: 0 = WOMAN, 1 = MAN
sex <- rbinom(200, size = 1, prob = 0.5)

# Age: normal distribution (stoma group slightly older)
age <- rnorm(200, mean = 65 + 3 * stoma, sd = 8)

# Survival time: exponential distribution
#   expected survival 10 years (with stoma) vs 15 years (without)
hazard <- ifelse(stoma == 1, 1 / 10, 1 / 15)
time   <- rexp(200, rate = hazard)

# Random censoring: 0 = censored, 1 = event
status <- rbinom(200, size = 1, prob = 0.9)

dat <- data.frame(
  age    = age,
  sex    = factor(sex, levels = c(0, 1), labels = c("WOMAN", "MAN")),
  stoma  = factor(stoma, levels = c(0, 1),
                  labels = c("WITHOUT STOMA", "WITH STOMA")),
  time   = time,
  status = status
)

head(dat)
```
:::


::: {.callout-note appearance="simple" title="Summarizing continuous and binary data"}
First, let’s describe age and sex in the stoma vs non-stoma groups using a **histogram** and **contingency table**. You should see that the age distribution for the stoma group is slightly shifted to the right (older on average), because that’s how we simulated it.
:::

::: {.callout-note appearance="simple" collapse="true" title="R code and output"}
```{r warning=FALSE}
# install.packages("ggplot2") # if needed
library(ggplot2)

ggplot(dat, aes(x = age, fill = stoma)) +
geom_histogram(alpha = 0.5, position = "identity", bins = 10) +
labs(x = "AGE", y = "FREQUENCY", fill = "STOMA") +
theme_minimal()

table(STOMA = dat$stoma, SEX = dat$sex)
```
:::

::: {.callout-note appearance="simple" title="Summarizing survival data with survival curves"}

For survival data, we want to describe how long patients survive without the event. Here we use `cifplot()` from the **cifmodeling** package to draw the **Kaplan-Meier curves**. `Event(time, status)` tells R which variables represent the time and event indicator. `outcome.type = "survival"` asks for a survival curve. Under our simulation, the non-stoma group should have better survival, so its curve will lie above the stoma group. 
:::

::: {.callout-note appearance="simple" collapse="true" title="R code and output"}
```{r warning=FALSE}
# install.packages("cifmodeling") # if needed
library(cifmodeling)
cifplot(Event(time, status) ~ stoma,
  data         = dat,
  outcome.type = "survival"
)
```
:::

::: {.callout-note appearance="simple" title="A quiz related to this episode"}

This quiz connects the idea of outcomes to real drug approvals in oncology. From 2009 to 2014, 83 drugs in the oncology field were approved by the FDA. Select the correct percentage of these 83 drugs that were approved based on clinical trials using response rate (tumor shrinkage or complete remission) as the primary endpoint.

1.  0～24%
2.  25～49%
3.  50～74%
4.  75～100%
:::

::: {.callout-note appearance="simple"  collapse="true" title="Answer"}
-   The correct answer is **2**.

According to the review by Kim and Prasad (2016), 31 out of 83 products were reported to have been approved based on response rate results. Furthermore, the breakdown of endpoints differs between standard approval and accelerated approval. For standard approval, 48 out of 55 products were evaluated based on overall survival, progression-free survival, or disease-free survival. In contrast, for accelerated approval, the majority of products were based on Phase II trial results where response rate was the primary endpoint.
:::

### Reference

- Kim C and Prasad V. Strength of validation for surrogate end points used in the US Food and Drug Administration's approval of oncology drugs. Mayo Clin Proc 2016; S0025-6196(16)00125-7

### Episodes, glossary, and R-script

- [A Story of Coffee Chat and Research Hypothesis](study-design-1.html)
- [Data Have Types: A Coffee-Chat Guide to R Functions for Common Outcomes](study-design-2.html)
- [Outcomes: The Bridge from Data Collection to Analysis]
- [A First Step into Survival and Competing Risks Analysis with R]
- [When Bias Creeps In: Selection, Information, and Confounding in Clinical Surveys]
- [Statistical Terms in Plain Language](glossary.html)
- [study-design.R](../from-coffee-chat-to-r/study-design.R)

