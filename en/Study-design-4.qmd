---
title: "Outcomes: The Bridge from Data Collection to Analysis"
format:
  html:
    toc: true
---

```{=html}
<style>
header#title-block-header.quarto-title-block {
  display: none !important;
}

body {
  margin: 0;
  background: #ffffff;
  color: #2b1f1a;
  font-family: "Inter", "Helvetica Neue", Arial, sans-serif;
  font-size: 18px;
  line-height: 1.55;
}

h1, h2, h3 {
  font-family: "Georgia", "Times New Roman", serif;
  color: #3a2a22;
  font-weight: 600;
}

h3 {
  margin-top: 2.4rem;
}

a {
  color: #8b4a24;
  text-decoration: none;
}
a:hover {
  color: #6f3718;
  text-decoration: underline;
}

.navbar {
  background: #ffffff !important;
  border-bottom: 1px solid #e6e0da;
  margin-bottom: 0 !important;
}
.navbar .navbar-brand,
.navbar .navbar-nav > li > a {
  color: #3a2a22 !important;
  border-bottom: 2px solid transparent;
  padding-bottom: 2px;
}
.navbar .navbar-nav > li > a:hover {
  border-bottom-color: #8b4a24;
}

.hero-text {
  padding: 1.5rem 0;
  color: #3a2a22;
}

.project-card {
  border: 1px solid #e6e0da;
  padding: 1.3rem 1.5rem;
  box-shadow: 0 1px 3px rgba(0,0,0,0.05);
  background: #ffffff;
  border-radius: 6px;
  margin-bottom: 1.5rem;
}

.about-section {
  border: 1px solid #e6e0da;
  padding: 1.5rem;
  border-radius: 0;
  background: #ffffff;
  margin-top: 2.5rem;
}

.about-section::after {
  content: "";
  display: block;
  clear: both;
}

.author-photo {
  float: left;
  margin-right: 1rem;
  border-radius: 50%;
}

.btn-link {
  display: inline-block;
  border: 1px solid #8b4a24;
  color: #8b4a24;
  padding: 0.4rem 0.9rem;
  font-size: 0.9rem;
  border-radius: 3px;
}
.btn-link:hover {
  background: #8b4a24;
  color: #ffffff;
}

.content-narrow {
  max-width: 1000px;
  margin: 0 auto;
  padding: 1.8rem 1.2rem 2.5rem;
}

.hero-header {
  margin-left: calc(50% - 50vw);
  margin-right: calc(50% - 50vw);
}

.hero-header-img {
  width: 100vw;
  height: min(400px, 45vh);
  object-fit: cover;
  object-position: 50% 40%;
  display: block;
}

.dialogue p {
  line-height: 1.7;
}
.dialogue .voice-father p {
  color: #7a3e1a !important;
}
.dialogue .voice-daughter p {
  color: #234f7c !important;
}
.dialogue .voice-daughter,
.dialogue .voice-father {
  margin-bottom: 0.4rem;
}

.text-right {
  text-align: right;
}
.serif-block p {
  font-family: "Georgia", "Times New Roman", serif;
  font-size: 0.9em;  line-height: 1.6;
}
</style>
```

::: hero-header
![](../image/father-daughter.png){.hero-header-img}
:::

# Study Design IV − The Bridge from Data Collection to Analysis

::: {.serif-block .text-right}
Keywords: generalized linear model, outcome, simulation, survival/competing-risk
:::
------------------------------------------------------------------------

### Turning a questionnaire into “data”

::::::::::::::::::::::::::::::::: dialogue
::: voice-daughter
Me: “Hey Dad, quick question. And yes, there’s coffee.”
:::

::: voice-father
Dad: “Then I’m listening.”
:::

::: voice-daughter
Me: “You remember that return-to-work survey for cancer survivors? I finally drafted the questionnaire we’re going to mail from our hospital. Can you take a look and tell me if it’s...statistically suicidal?”
:::

::: voice-father
Dad: “Let’s see...How exactly are you going to define the **return-to-work proportion**?”
:::

::: voice-daughter
Me: “That’s already a hard question?”
:::

::: voice-father
Dad: “Yup. It always is.”
:::

::: voice-daughter
Me: “Okay...here’s how I was thinking. Among all patients who had curative surgery, I want to know who **has returned to work** and who **hasn’t** within a certain time period. I don’t want to restrict the denominator to only those who *say* they want to go back to work, because some people might have given up because of workplace issues.”
:::

::: voice-father
Dad: “Good. That’s a thoughtful choice. So what time window are you using?”
:::

::: voice-daughter
Me: “I don’t want to use ‘survey date’ because the response timing will vary a lot between patients. So I was thinking of defining it as:

> ‘Returned to work within 1 year after surgery.’

And then I realized... I should probably ask for the **actual date of return-to-work** in the questionnaire.”
:::

::: voice-father
Dad: “Yes, that date is very useful. If you have it, you can turn the same answer into:"
:::

- Categorical data (returned within 1 year: yes/no)
- Survival data (time from discharge to return-to-work)

::: voice-daughter
Me: “Two birds with one question. Efficient. What about patients who **die** after surgery, though?”
:::

::: voice-father
Dad: “Important point. If someone dies after your **time origin**, you shouldn’t quietly drop them from the denominator. That would create bias—especially in a cancer survivor study.”
:::

::: voice-daughter
Me: “So what should I do?”
:::

::: voice-father
Dad: “In follow-up studies of cancer patients, I always tell people:"
:::

1. Decide a clear **time origin** – for you, I’d recommend the **discharge date**.  
2. Decide a **follow-up period** – here, ‘1 year after discharge’.  
3. Make a serious effort to collect outcome information for **all patients** in the target population, including deaths.

::: voice-father
Dad: “If the target population is ‘rectal cancer patients after curative surgery at our hospital’, you want to know what happened to *all* of them, not just the ones who kindly mail back questionnaires.”
:::

::: voice-daughter
Me: “Right. I don’t want to design a study where the only people included are those with good energy and good stationery habits.”
:::

### Categorical data vs survival time data

::: voice-father
Dad: “Let’s organize this a bit. What is your **outcome** in this study?”
:::

::: voice-daughter
Me: “The main one is:

> Returned to work within one year after discharge (yes/no).”
:::

::: voice-father
Dad: “Perfect. That gives you binary data. You can then compute the **return-to-work proportion** in each group, and compare them.”
:::

::: voice-daughter
Me: “Including patients who died, as ‘did not return’, right?”
:::

::: voice-father
Dad: “Yes, as long as that’s clearly defined and consistent. But if you want a richer picture,  
you could use **three categories** instead of just two:”

1. Returned within 1 year  
2. Alive but did not return within 1 year  
3. Died within 1 year without returning to work

::: voice-father
Dad: "That already separates ‘can’t work because I died’ from ‘still alive but didn’t go back’.”
:::

::: voice-daughter
Me: “Okay, that does sound more honest.”
:::

::: voice-father
Dad: “Now, if you also collect the **date of return-to-work**, you can create **survival data**.”
:::

::: voice-daughter
Me: “Even though the event is not ‘death’?”
:::

::: voice-father
Dad: “Right. ‘Survival time’ is a bit misleading as a name. Statistically, what matters is:

> time from the **time origin** to the **event of interest**.

In your case, the event is ‘return-to-work’.”
:::

::: voice-daughter
Me: “So if someone is discharged on April 1  
and returns to work on April 30,  
time-to-event = 30 days.”
:::

::: voice-father
Dad: “Exactly.  

Now think about patients who haven’t returned to work  
by the time you close the survey.  

For them, **time-to-return** isn’t observed yet.  
That’s where **censoring** comes in.”
:::

::: voice-daughter
Me: “Right. They’re still in limbo.”
:::

::: voice-father
Dad: “So survival data always comes as a **pair**:

- a time variable, and  
- an **event indicator**.

For example:

- time = min( time to return-to-work, time to last follow-up )  
- event = 1 if returned, 0 if not returned by last follow-up.”
:::

::: voice-daughter
Me: “And where do **deaths** go in that picture?”
:::

::: voice-father
Dad: “There are two ways to think about it.

1. A simple approach:  
   treat deaths as ‘did not return to work’,  
   and let them contribute their time until death.  
   In the event indicator, death would be coded as **no event**  
   if you only care about return-to-work.

2. A more refined approach: **competing risks**.  
   Here, death is not just ‘censored’—  
   it’s a **competing event** that prevents return-to-work from happening.”
:::

::: voice-daughter
Me: “Competing risks again. You really like those.”
:::

::: voice-father
Dad: “They show up a lot in medical data.  

If you treat all deaths as just censored,  
you’re implicitly saying:

> ‘If they hadn’t died, their chance of returning-to-work  
> would be the same as for people still alive.’

In reality, that’s often not true.”
:::

::: voice-daughter
Me: “Yeah, that would be… optimistic.”
:::

---

### A quick map of data types and methods

::: voice-father
Dad: “Since we’ve talked about data types a few times now,  
let’s draw a little map.  

Say we’re thinking about:

- what kind of **outcome** we have,  
- whether we have **repeated measurements**, and  
- whether we need to **adjust for confounding**.”
:::

::: voice-daughter
Me: “This sounds like the part where you normally pull out a slide.”
:::

::: voice-father
Dad: “Today we get the short version.”
:::

| Data type         | Repeated within person? | Confounding? | Typical methods                        |
|-------------------|-------------------------|--------------|----------------------------------------|
| Continuous        | No                      | No           | t-test, Wilcoxon rank-sum              |
| Continuous        | No                      | Yes          | Linear regression                      |
| Continuous        | Yes                     | Yes          | Mixed-effects model, GEE               |
| Binary (yes/no)   | No                      | No           | χ² test                                |
| Binary            | No                      | Yes          | Logistic regression                    |
| Binary            | Yes                     | Yes          | Mixed-effects logistic, GEE            |
| Count             | No                      | Yes          | Poisson regression                     |
| Survival time     | No                      | No           | Kaplan–Meier curve                     |
| Survival time     | No                      | Yes          | Cox regression                         |
| Competing risks   | No                      | No           | Aalen–Johansen curve (cumulative incidence) |
| Competing risks   | No                      | Yes          | Fine–Gray model                        |

::: voice-daughter
Me: “So for my study:

- ‘Returned to work within 1 year (yes/no)’  
  → binary outcome → logistic regression.

- ‘Time from discharge to return-to-work’  
  → survival outcome → Cox regression.

And if I treat death as a competing risk for return-to-work,  
I’d use an Aalen–Johansen curve for descriptive stuff?”
:::

::: voice-father
Dad: “Exactly.  
That’s already a good grasp of the landscape.”

---

### Repeated measurements and confounding

::: voice-daughter
Me: “Where do repeated measures come in?”
:::

::: voice-father
Dad: “Imagine you use the same questionnaire  
multiple times for each patient:

- pre-surgery  
- at 6 months  
- at 12 months

Then you’d have multiple data points **within each person**.  
Those are **correlated** — your own responses are more similar to each other  
than to some random patient’s.”
:::

::: voice-daughter
Me: “So I can’t just pretend they’re all independent.”
:::

::: voice-father
Dad: “Right. That’s when you use methods like:

- **random-effects (mixed) models**, or  
- **GEE (generalized estimating equations)**.

They’re built to handle within-person correlation.”
:::

::: voice-daughter
Me: “And confounding is the ‘third variable’ that messes with the comparison, right?”
:::

::: voice-father
Dad: “Exactly. Suppose older patients are both:

- more likely to have a stoma, and  
- less likely to return to work.

If you simply compare stoma vs no-stoma without adjusting for **age**,  
your estimated effect of stoma will be **biased**.  

That’s where logistic regression or Cox regression  
—with age and other factors—  
helps you **adjust for confounding**.”
:::

::: voice-daughter
Me: “So in randomized trials, we use randomization  
to balance those things in advance.  

But in observational studies like mine,  
we depend more on modeling and design.”
:::

::: voice-father
Dad: “Precisely. That’s the big difference between ‘trial world’ and ‘real-world data’.”
:::


::: {.callout-note appearance="simple" title="A quiz related to this episode"}
In which situation is the **Kaplan–Meier method** appropriate for estimating a survival curve?

1. When survival times follow a normal distribution.  
2. When the reasons for censoring are unrelated to prognosis.  
3. When the censoring proportions of two groups do not differ significantly in a statistical test.  
4. When the proportional hazards assumption holds between the treatment and control groups.  
:::


::: {.callout-note appearance="simple" collapse="true" title="Answer"}
- The correct answer is **2**.

The Kaplan–Meier method does **not** require:

- normality of survival times (that’s more for t-tests), nor  
- proportional hazards (that’s a key assumption for the Cox model).

What it *does* assume is that **censoring is non-informative**. If sicker patients are more likely to be lost to follow-up, or if follow-up intensity depends strongly on prognosis, Kaplan–Meier curves can become biased.
:::


### Episodes

- [A Story of Coffee Chat and Research Hypothesis](study-design-1.qmd)
- [Data Have Types: A Coffee-Chat Guide to R Functions for Common Outcomes](study-design-2.qmd)
- [A First Step into Survival and Competing Risks Analysis with R](study-design-3.qmd)
- [Outcomes: The Bridge from Data Collection to Analysis](study-design-4.qmd)
- [When Bias Creeps In: Selection, Information, and Confounding in Clinical Surveys]
